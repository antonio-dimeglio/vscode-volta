"use strict";var dd=Object.create;var Ss=Object.defineProperty;var fd=Object.getOwnPropertyDescriptor;var hd=Object.getOwnPropertyNames;var gd=Object.getPrototypeOf,md=Object.prototype.hasOwnProperty;var S=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var pd=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of hd(t))!md.call(e,i)&&i!==n&&Ss(e,i,{get:()=>t[i],enumerable:!(r=fd(t,i))||r.enumerable});return e};var Rt=(e,t,n)=>(n=e!=null?dd(gd(e)):{},pd(t||!e||!e.__esModule?Ss(n,"default",{value:e,enumerable:!0}):n,e));var Vn=S(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.thenable=fe.typedArray=fe.stringArray=fe.array=fe.func=fe.error=fe.number=fe.string=fe.boolean=void 0;function yd(e){return e===!0||e===!1}fe.boolean=yd;function qs(e){return typeof e=="string"||e instanceof String}fe.string=qs;function vd(e){return typeof e=="number"||e instanceof Number}fe.number=vd;function bd(e){return e instanceof Error}fe.error=bd;function Os(e){return typeof e=="function"}fe.func=Os;function Ms(e){return Array.isArray(e)}fe.array=Ms;function _d(e){return Ms(e)&&e.every(t=>qs(t))}fe.stringArray=_d;function Dd(e,t){return Array.isArray(e)&&e.every(t)}fe.typedArray=Dd;function Rd(e){return e&&Os(e.then)}fe.thenable=Rd});var Lt=S(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.stringArray=_e.array=_e.func=_e.error=_e.number=_e.string=_e.boolean=void 0;function wd(e){return e===!0||e===!1}_e.boolean=wd;function Es(e){return typeof e=="string"||e instanceof String}_e.string=Es;function Pd(e){return typeof e=="number"||e instanceof Number}_e.number=Pd;function Cd(e){return e instanceof Error}_e.error=Cd;function Td(e){return typeof e=="function"}_e.func=Td;function Ns(e){return Array.isArray(e)}_e.array=Ns;function kd(e){return Ns(e)&&e.every(t=>Es(t))}_e.stringArray=kd});var Hi=S(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.Message=M.NotificationType9=M.NotificationType8=M.NotificationType7=M.NotificationType6=M.NotificationType5=M.NotificationType4=M.NotificationType3=M.NotificationType2=M.NotificationType1=M.NotificationType0=M.NotificationType=M.RequestType9=M.RequestType8=M.RequestType7=M.RequestType6=M.RequestType5=M.RequestType4=M.RequestType3=M.RequestType2=M.RequestType1=M.RequestType=M.RequestType0=M.AbstractMessageSignature=M.ParameterStructures=M.ResponseError=M.ErrorCodes=void 0;var wt=Lt(),yi;(function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3})(yi||(M.ErrorCodes=yi={}));var vi=class e extends Error{constructor(t,n,r){super(n),this.code=wt.number(t)?t:yi.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,e.prototype)}toJson(){let t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),t}};M.ResponseError=vi;var Te=class e{constructor(t){this.kind=t}static is(t){return t===e.auto||t===e.byName||t===e.byPosition}toString(){return this.kind}};M.ParameterStructures=Te;Te.auto=new Te("auto");Te.byPosition=new Te("byPosition");Te.byName=new Te("byName");var ie=class{constructor(t,n){this.method=t,this.numberOfParams=n}get parameterStructures(){return Te.auto}};M.AbstractMessageSignature=ie;var bi=class extends ie{constructor(t){super(t,0)}};M.RequestType0=bi;var _i=class extends ie{constructor(t,n=Te.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.RequestType=_i;var Di=class extends ie{constructor(t,n=Te.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.RequestType1=Di;var Ri=class extends ie{constructor(t){super(t,2)}};M.RequestType2=Ri;var wi=class extends ie{constructor(t){super(t,3)}};M.RequestType3=wi;var Pi=class extends ie{constructor(t){super(t,4)}};M.RequestType4=Pi;var Ci=class extends ie{constructor(t){super(t,5)}};M.RequestType5=Ci;var Ti=class extends ie{constructor(t){super(t,6)}};M.RequestType6=Ti;var ki=class extends ie{constructor(t){super(t,7)}};M.RequestType7=ki;var Si=class extends ie{constructor(t){super(t,8)}};M.RequestType8=Si;var qi=class extends ie{constructor(t){super(t,9)}};M.RequestType9=qi;var Oi=class extends ie{constructor(t,n=Te.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.NotificationType=Oi;var Mi=class extends ie{constructor(t){super(t,0)}};M.NotificationType0=Mi;var Ei=class extends ie{constructor(t,n=Te.auto){super(t,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};M.NotificationType1=Ei;var Ni=class extends ie{constructor(t){super(t,2)}};M.NotificationType2=Ni;var ji=class extends ie{constructor(t){super(t,3)}};M.NotificationType3=ji;var xi=class extends ie{constructor(t){super(t,4)}};M.NotificationType4=xi;var Ii=class extends ie{constructor(t){super(t,5)}};M.NotificationType5=Ii;var Fi=class extends ie{constructor(t){super(t,6)}};M.NotificationType6=Fi;var Li=class extends ie{constructor(t){super(t,7)}};M.NotificationType7=Li;var Ai=class extends ie{constructor(t){super(t,8)}};M.NotificationType8=Ai;var Wi=class extends ie{constructor(t){super(t,9)}};M.NotificationType9=Wi;var js;(function(e){function t(i){let c=i;return c&&wt.string(c.method)&&(wt.string(c.id)||wt.number(c.id))}e.isRequest=t;function n(i){let c=i;return c&&wt.string(c.method)&&i.id===void 0}e.isNotification=n;function r(i){let c=i;return c&&(c.result!==void 0||!!c.error)&&(wt.string(c.id)||wt.number(c.id)||c.id===null)}e.isResponse=r})(js||(M.Message=js={}))});var Ui=S(ot=>{"use strict";var xs;Object.defineProperty(ot,"__esModule",{value:!0});ot.LRUCache=ot.LinkedMap=ot.Touch=void 0;var De;(function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last})(De||(ot.Touch=De={}));var Bn=class{constructor(){this[xs]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(t){return this._map.has(t)}get(t,n=De.None){let r=this._map.get(t);if(r)return n!==De.None&&this.touch(r,n),r.value}set(t,n,r=De.None){let i=this._map.get(t);if(i)i.value=n,r!==De.None&&this.touch(i,r);else{switch(i={key:t,value:n,next:void 0,previous:void 0},r){case De.None:this.addItemLast(i);break;case De.First:this.addItemFirst(i);break;case De.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(t,i),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){let n=this._map.get(t);if(n)return this._map.delete(t),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,n){let r=this._state,i=this._head;for(;i;){if(n?t.bind(n)(i.value,i.key,this):t(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){let t=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(xs=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>t;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{let n=t.next,r=t.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}t.next=void 0,t.previous=void 0,this._state++}touch(t,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==De.First&&n!==De.Last)){if(n===De.First){if(t===this._head)return;let r=t.next,i=t.previous;t===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(n===De.Last){if(t===this._tail)return;let r=t.next,i=t.previous;t===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){let t=[];return this.forEach((n,r)=>{t.push([r,n])}),t}fromJSON(t){this.clear();for(let[n,r]of t)this.set(n,r)}};ot.LinkedMap=Bn;var $i=class extends Bn{constructor(t,n=1){super(),this._limit=t,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get ratio(){return this._ratio}set ratio(t){this._ratio=Math.min(Math.max(0,t),1),this.checkTrim()}get(t,n=De.AsNew){return super.get(t,n)}peek(t){return super.get(t,De.None)}set(t,n){return super.set(t,n,De.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};ot.LRUCache=$i});var Fs=S(Jn=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});Jn.Disposable=void 0;var Is;(function(e){function t(n){return{dispose:n}}e.create=t})(Is||(Jn.Disposable=Is={}))});var st=S(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});var zi;function Vi(){if(zi===void 0)throw new Error("No runtime abstraction layer installed");return zi}(function(e){function t(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");zi=n}e.install=t})(Vi||(Vi={}));Bi.default=Vi});var Wt=S(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.Emitter=At.Event=void 0;var Sd=st(),Ls;(function(e){let t={dispose(){}};e.None=function(){return t}})(Ls||(At.Event=Ls={}));var Ji=class{add(t,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:()=>this.remove(t,n)})}remove(t,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,c=this._callbacks.length;i<c;i++)if(this._callbacks[i]===t)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let c=0,h=r.length;c<h;c++)try{n.push(r[c].apply(i[c],t))}catch(v){(0,Sd.default)().console.error(v)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Gn=class e{constructor(t){this._options=t}get event(){return this._event||(this._event=(t,n,r)=>{this._callbacks||(this._callbacks=new Ji),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(t,n);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(t,n),i.dispose=e._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(r)&&r.push(i),i}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};At.Emitter=Gn;Gn._noop=function(){}});var Qn=S(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.CancellationTokenSource=Ht.CancellationToken=void 0;var qd=st(),Od=Lt(),Gi=Wt(),Xn;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Gi.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Gi.Event.None});function t(n){let r=n;return r&&(r===e.None||r===e.Cancelled||Od.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}e.is=t})(Xn||(Ht.CancellationToken=Xn={}));var Md=Object.freeze(function(e,t){let n=(0,qd.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}),Kn=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Md:(this._emitter||(this._emitter=new Gi.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},Xi=class{get token(){return this._token||(this._token=new Kn),this._token}cancel(){this._token?this._token.cancel():this._token=Xn.Cancelled}dispose(){this._token?this._token instanceof Kn&&this._token.dispose():this._token=Xn.None}};Ht.CancellationTokenSource=Xi});var As=S($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.SharedArrayReceiverStrategy=$t.SharedArraySenderStrategy=void 0;var Ed=Qn(),hn;(function(e){e.Continue=0,e.Cancelled=1})(hn||(hn={}));var Ki=class{constructor(){this.buffers=new Map}enableCancellation(t){if(t.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=hn.Continue,this.buffers.set(t.id,n),t.$cancellationData=n}async sendCancellation(t,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,hn.Cancelled)}cleanup(t){this.buffers.delete(t)}dispose(){this.buffers.clear()}};$t.SharedArraySenderStrategy=Ki;var Qi=class{constructor(t){this.data=new Int32Array(t,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===hn.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},Yi=class{constructor(t){this.token=new Qi(t)}cancel(){}dispose(){}},Zi=class{constructor(){this.kind="request"}createCancellationTokenSource(t){let n=t.$cancellationData;return n===void 0?new Ed.CancellationTokenSource:new Yi(n)}};$t.SharedArrayReceiverStrategy=Zi});var to=S(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.Semaphore=void 0;var Nd=st(),eo=class{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((n,r)=>{this._waiting.push({thunk:t,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Nd.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=t.thunk();n instanceof Promise?n.then(r=>{this._active--,t.resolve(r),this.runNext()},r=>{this._active--,t.reject(r),this.runNext()}):(this._active--,t.resolve(n),this.runNext())}catch(n){this._active--,t.reject(n),this.runNext()}}};Yn.Semaphore=eo});var Hs=S(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.ReadableStreamMessageReader=at.AbstractMessageReader=at.MessageReader=void 0;var ro=st(),Ut=Lt(),no=Wt(),jd=to(),Ws;(function(e){function t(n){let r=n;return r&&Ut.func(r.listen)&&Ut.func(r.dispose)&&Ut.func(r.onError)&&Ut.func(r.onClose)&&Ut.func(r.onPartialMessage)}e.is=t})(Ws||(at.MessageReader=Ws={}));var Zn=class{constructor(){this.errorEmitter=new no.Emitter,this.closeEmitter=new no.Emitter,this.partialMessageEmitter=new no.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t){this.errorEmitter.fire(this.asError(t))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(t){this.partialMessageEmitter.fire(t)}asError(t){return t instanceof Error?t:new Error(`Reader received error. Reason: ${Ut.string(t.message)?t.message:"unknown"}`)}};at.AbstractMessageReader=Zn;var io;(function(e){function t(n){let r,i,c,h=new Map,v,k=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(c=n.contentDecoder,h.set(c.name,c)),n.contentDecoders!==void 0)for(let w of n.contentDecoders)h.set(w.name,w);if(n.contentTypeDecoder!==void 0&&(v=n.contentTypeDecoder,k.set(v.name,v)),n.contentTypeDecoders!==void 0)for(let w of n.contentTypeDecoders)k.set(w.name,w)}return v===void 0&&(v=(0,ro.default)().applicationJson.decoder,k.set(v.name,v)),{charset:r,contentDecoder:c,contentDecoders:h,contentTypeDecoder:v,contentTypeDecoders:k}}e.fromOptions=t})(io||(io={}));var oo=class extends Zn{constructor(t,n){super(),this.readable=t,this.options=io.fromOptions(n),this.buffer=(0,ro.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new jd.Semaphore(1)}set partialMessageTimeout(t){this._partialMessageTimeout=t}get partialMessageTimeout(){return this._partialMessageTimeout}listen(t){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=t;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(t){try{for(this.buffer.append(t);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let c=parseInt(i);if(isNaN(c)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=c}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,ro.default)().timer.setTimeout((t,n)=>{this.partialMessageTimer=void 0,t===this.messageToken&&(this.firePartialMessage({messageToken:t,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};at.ReadableStreamMessageReader=oo});var Bs=S(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.WriteableStreamMessageWriter=ct.AbstractMessageWriter=ct.MessageWriter=void 0;var $s=st(),gn=Lt(),xd=to(),Us=Wt(),Id="Content-Length: ",zs=`\r
`,Vs;(function(e){function t(n){let r=n;return r&&gn.func(r.dispose)&&gn.func(r.onClose)&&gn.func(r.onError)&&gn.func(r.write)}e.is=t})(Vs||(ct.MessageWriter=Vs={}));var er=class{constructor(){this.errorEmitter=new Us.Emitter,this.closeEmitter=new Us.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(t,n,r){this.errorEmitter.fire([this.asError(t),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(t){return t instanceof Error?t:new Error(`Writer received error. Reason: ${gn.string(t.message)?t.message:"unknown"}`)}};ct.AbstractMessageWriter=er;var so;(function(e){function t(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,$s.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,$s.default)().applicationJson.encoder}}e.fromOptions=t})(so||(so={}));var ao=class extends er{constructor(t,n){super(),this.writable=t,this.options=so.fromOptions(n),this.errorCount=0,this.writeSemaphore=new xd.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(t){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(t,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(Id,r.byteLength.toString(),zs),i.push(zs),this.doWrite(t,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(t,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,t),Promise.reject(i)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){this.writable.end()}};ct.WriteableStreamMessageWriter=ao});var Js=S(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.AbstractMessageBuffer=void 0;var Fd=13,Ld=10,Ad=`\r
`,co=class{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(t){let n=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(t=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,c=0;e:for(;r<this._chunks.length;){let w=this._chunks[r];for(i=0;i<w.length;){switch(w[i]){case Fd:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case Ld:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}c+=w.byteLength,r++}if(n!==4)return;let h=this._read(c+i),v=new Map,k=this.toString(h,"ascii").split(Ad);if(k.length<2)return v;for(let w=0;w<k.length-2;w++){let q=k[w],N=q.indexOf(":");if(N===-1)throw new Error(`Message header must separate key and value using ':'
${q}`);let E=q.substr(0,N),Z=q.substr(N+1).trim();v.set(t?E.toLowerCase():E,Z)}return v}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){let c=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(c)}if(this._chunks[0].byteLength>t){let c=this._chunks[0],h=this.asNative(c,t);return this._chunks[0]=c.slice(t),this._totalLength-=t,h}let n=this.allocNative(t),r=0,i=0;for(;t>0;){let c=this._chunks[i];if(c.byteLength>t){let h=c.slice(0,t);n.set(h,r),r+=t,this._chunks[i]=c.slice(t),this._totalLength-=t,t-=t}else n.set(c,r),r+=c.byteLength,this._chunks.shift(),this._totalLength-=c.byteLength,t-=c.byteLength}return n}};tr.AbstractMessageBuffer=co});var Ys=S(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.createMessageConnection=F.ConnectionOptions=F.MessageStrategy=F.CancellationStrategy=F.CancellationSenderStrategy=F.CancellationReceiverStrategy=F.RequestCancellationReceiverStrategy=F.IdCancellationReceiverStrategy=F.ConnectionStrategy=F.ConnectionError=F.ConnectionErrors=F.LogTraceNotification=F.SetTraceNotification=F.TraceFormat=F.TraceValues=F.Trace=F.NullLogger=F.ProgressType=F.ProgressToken=void 0;var Gs=st(),ae=Lt(),j=Hi(),Xs=Ui(),mn=Wt(),uo=Qn(),vn;(function(e){e.type=new j.NotificationType("$/cancelRequest")})(vn||(vn={}));var lo;(function(e){function t(n){return typeof n=="string"||typeof n=="number"}e.is=t})(lo||(F.ProgressToken=lo={}));var pn;(function(e){e.type=new j.NotificationType("$/progress")})(pn||(pn={}));var fo=class{constructor(){}};F.ProgressType=fo;var ho;(function(e){function t(n){return ae.func(n)}e.is=t})(ho||(ho={}));F.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var J;(function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"})(J||(F.Trace=J={}));var Ks;(function(e){e.Off="off",e.Messages="messages",e.Compact="compact",e.Verbose="verbose"})(Ks||(F.TraceValues=Ks={}));(function(e){function t(r){if(!ae.string(r))return e.Off;switch(r=r.toLowerCase(),r){case"off":return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=t;function n(r){switch(r){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}e.toString=n})(J||(F.Trace=J={}));var Ee;(function(e){e.Text="text",e.JSON="json"})(Ee||(F.TraceFormat=Ee={}));(function(e){function t(n){return ae.string(n)?(n=n.toLowerCase(),n==="json"?e.JSON:e.Text):e.Text}e.fromString=t})(Ee||(F.TraceFormat=Ee={}));var go;(function(e){e.type=new j.NotificationType("$/setTrace")})(go||(F.SetTraceNotification=go={}));var nr;(function(e){e.type=new j.NotificationType("$/logTrace")})(nr||(F.LogTraceNotification=nr={}));var yn;(function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"})(yn||(F.ConnectionErrors=yn={}));var zt=class e extends Error{constructor(t,n){super(n),this.code=t,Object.setPrototypeOf(this,e.prototype)}};F.ConnectionError=zt;var mo;(function(e){function t(n){let r=n;return r&&ae.func(r.cancelUndispatched)}e.is=t})(mo||(F.ConnectionStrategy=mo={}));var rr;(function(e){function t(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&ae.func(r.createCancellationTokenSource)&&(r.dispose===void 0||ae.func(r.dispose))}e.is=t})(rr||(F.IdCancellationReceiverStrategy=rr={}));var po;(function(e){function t(n){let r=n;return r&&r.kind==="request"&&ae.func(r.createCancellationTokenSource)&&(r.dispose===void 0||ae.func(r.dispose))}e.is=t})(po||(F.RequestCancellationReceiverStrategy=po={}));var ir;(function(e){e.Message=Object.freeze({createCancellationTokenSource(n){return new uo.CancellationTokenSource}});function t(n){return rr.is(n)||po.is(n)}e.is=t})(ir||(F.CancellationReceiverStrategy=ir={}));var or;(function(e){e.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(vn.type,{id:r})},cleanup(n){}});function t(n){let r=n;return r&&ae.func(r.sendCancellation)&&ae.func(r.cleanup)}e.is=t})(or||(F.CancellationSenderStrategy=or={}));var sr;(function(e){e.Message=Object.freeze({receiver:ir.Message,sender:or.Message});function t(n){let r=n;return r&&ir.is(r.receiver)&&or.is(r.sender)}e.is=t})(sr||(F.CancellationStrategy=sr={}));var ar;(function(e){function t(n){let r=n;return r&&ae.func(r.handleMessage)}e.is=t})(ar||(F.MessageStrategy=ar={}));var Qs;(function(e){function t(n){let r=n;return r&&(sr.is(r.cancellationStrategy)||mo.is(r.connectionStrategy)||ar.is(r.messageStrategy))}e.is=t})(Qs||(F.ConnectionOptions=Qs={}));var Ue;(function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"})(Ue||(Ue={}));function Wd(e,t,n,r){let i=n!==void 0?n:F.NullLogger,c=0,h=0,v=0,k="2.0",w,q=new Map,N,E=new Map,Z=new Map,ge,z=new Xs.LinkedMap,Q=new Map,U=new Set,y=new Map,p=J.Off,P=Ee.Text,A,X=Ue.New,ee=new mn.Emitter,be=new mn.Emitter,vt=new mn.Emitter,nt=new mn.Emitter,rt=new mn.Emitter,Ce=r&&r.cancellationStrategy?r.cancellationStrategy:sr.Message;function Mt(l){if(l===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+l.toString()}function Et(l){return l===null?"res-unknown-"+(++v).toString():"res-"+l.toString()}function qn(){return"not-"+(++h).toString()}function pi(l,_){j.Message.isRequest(_)?l.set(Mt(_.id),_):j.Message.isResponse(_)?l.set(Et(_.id),_):l.set(qn(),_)}function On(l){}function an(){return X===Ue.Listening}function bt(){return X===Ue.Closed}function Ke(){return X===Ue.Disposed}function Nt(){(X===Ue.New||X===Ue.Listening)&&(X=Ue.Closed,be.fire(void 0))}function _t(l){ee.fire([l,void 0,void 0])}function Mn(l){ee.fire(l)}e.onClose(Nt),e.onError(_t),t.onClose(Nt),t.onError(Mn);function cn(){ge||z.size===0||(ge=(0,Gs.default)().timer.setImmediate(()=>{ge=void 0,En()}))}function un(l){j.Message.isRequest(l)?jn(l):j.Message.isNotification(l)?In(l):j.Message.isResponse(l)?xn(l):jt(l)}function En(){if(z.size===0)return;let l=z.shift();try{let _=r?.messageStrategy;ar.is(_)?_.handleMessage(l,un):un(l)}finally{cn()}}let Nn=l=>{try{if(j.Message.isNotification(l)&&l.method===vn.type.method){let _=l.params.id,C=Mt(_),O=z.get(C);if(j.Message.isRequest(O)){let G=r?.connectionStrategy,re=G&&G.cancelUndispatched?G.cancelUndispatched(O,On):void 0;if(re&&(re.error!==void 0||re.result!==void 0)){z.delete(C),y.delete(_),re.id=O.id,Dt(re,l.method,Date.now()),t.write(re).catch(()=>i.error("Sending response for canceled message failed."));return}}let K=y.get(_);if(K!==void 0){K.cancel(),xt(l);return}else U.add(_)}pi(z,l)}finally{cn()}};function jn(l){if(Ke())return;function _(W,Y,V){let ce={jsonrpc:k,id:l.id};W instanceof j.ResponseError?ce.error=W.toJson():ce.result=W===void 0?null:W,Dt(ce,Y,V),t.write(ce).catch(()=>i.error("Sending response failed."))}function C(W,Y,V){let ce={jsonrpc:k,id:l.id,error:W.toJson()};Dt(ce,Y,V),t.write(ce).catch(()=>i.error("Sending response failed."))}function O(W,Y,V){W===void 0&&(W=null);let ce={jsonrpc:k,id:l.id,result:W};Dt(ce,Y,V),t.write(ce).catch(()=>i.error("Sending response failed."))}An(l);let K=q.get(l.method),G,re;K&&(G=K.type,re=K.handler);let oe=Date.now();if(re||w){let W=l.id??String(Date.now()),Y=rr.is(Ce.receiver)?Ce.receiver.createCancellationTokenSource(W):Ce.receiver.createCancellationTokenSource(l);l.id!==null&&U.has(l.id)&&Y.cancel(),l.id!==null&&y.set(W,Y);try{let V;if(re)if(l.params===void 0){if(G!==void 0&&G.numberOfParams!==0){C(new j.ResponseError(j.ErrorCodes.InvalidParams,`Request ${l.method} defines ${G.numberOfParams} params but received none.`),l.method,oe);return}V=re(Y.token)}else if(Array.isArray(l.params)){if(G!==void 0&&G.parameterStructures===j.ParameterStructures.byName){C(new j.ResponseError(j.ErrorCodes.InvalidParams,`Request ${l.method} defines parameters by name but received parameters by position`),l.method,oe);return}V=re(...l.params,Y.token)}else{if(G!==void 0&&G.parameterStructures===j.ParameterStructures.byPosition){C(new j.ResponseError(j.ErrorCodes.InvalidParams,`Request ${l.method} defines parameters by position but received parameters by name`),l.method,oe);return}V=re(l.params,Y.token)}else w&&(V=w(l.method,l.params,Y.token));let ce=V;V?ce.then?ce.then(me=>{y.delete(W),_(me,l.method,oe)},me=>{y.delete(W),me instanceof j.ResponseError?C(me,l.method,oe):me&&ae.string(me.message)?C(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${l.method} failed with message: ${me.message}`),l.method,oe):C(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${l.method} failed unexpectedly without providing any details.`),l.method,oe)}):(y.delete(W),_(V,l.method,oe)):(y.delete(W),O(V,l.method,oe))}catch(V){y.delete(W),V instanceof j.ResponseError?_(V,l.method,oe):V&&ae.string(V.message)?C(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${l.method} failed with message: ${V.message}`),l.method,oe):C(new j.ResponseError(j.ErrorCodes.InternalError,`Request ${l.method} failed unexpectedly without providing any details.`),l.method,oe)}}else C(new j.ResponseError(j.ErrorCodes.MethodNotFound,`Unhandled method ${l.method}`),l.method,oe)}function xn(l){if(!Ke())if(l.id===null)l.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(l.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let _=l.id,C=Q.get(_);if(Wn(l,C),C!==void 0){Q.delete(_);try{if(l.error){let O=l.error;C.reject(new j.ResponseError(O.code,O.message,O.data))}else if(l.result!==void 0)C.resolve(l.result);else throw new Error("Should never happen.")}catch(O){O.message?i.error(`Response handler '${C.method}' failed with message: ${O.message}`):i.error(`Response handler '${C.method}' failed unexpectedly.`)}}}}function In(l){if(Ke())return;let _,C;if(l.method===vn.type.method){let O=l.params.id;U.delete(O),xt(l);return}else{let O=E.get(l.method);O&&(C=O.handler,_=O.type)}if(C||N)try{if(xt(l),C)if(l.params===void 0)_!==void 0&&_.numberOfParams!==0&&_.parameterStructures!==j.ParameterStructures.byName&&i.error(`Notification ${l.method} defines ${_.numberOfParams} params but received none.`),C();else if(Array.isArray(l.params)){let O=l.params;l.method===pn.type.method&&O.length===2&&lo.is(O[0])?C({token:O[0],value:O[1]}):(_!==void 0&&(_.parameterStructures===j.ParameterStructures.byName&&i.error(`Notification ${l.method} defines parameters by name but received parameters by position`),_.numberOfParams!==l.params.length&&i.error(`Notification ${l.method} defines ${_.numberOfParams} params but received ${O.length} arguments`)),C(...O))}else _!==void 0&&_.parameterStructures===j.ParameterStructures.byPosition&&i.error(`Notification ${l.method} defines parameters by position but received parameters by name`),C(l.params);else N&&N(l.method,l.params)}catch(O){O.message?i.error(`Notification handler '${l.method}' failed with message: ${O.message}`):i.error(`Notification handler '${l.method}' failed unexpectedly.`)}else vt.fire(l)}function jt(l){if(!l){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(l,null,4)}`);let _=l;if(ae.string(_.id)||ae.number(_.id)){let C=_.id,O=Q.get(C);O&&O.reject(new Error("The received response has neither a result nor an error property."))}}function We(l){if(l!=null)switch(p){case J.Verbose:return JSON.stringify(l,null,4);case J.Compact:return JSON.stringify(l);default:return}}function Fn(l){if(!(p===J.Off||!A))if(P===Ee.Text){let _;(p===J.Verbose||p===J.Compact)&&l.params&&(_=`Params: ${We(l.params)}

`),A.log(`Sending request '${l.method} - (${l.id})'.`,_)}else Qe("send-request",l)}function Ln(l){if(!(p===J.Off||!A))if(P===Ee.Text){let _;(p===J.Verbose||p===J.Compact)&&(l.params?_=`Params: ${We(l.params)}

`:_=`No parameters provided.

`),A.log(`Sending notification '${l.method}'.`,_)}else Qe("send-notification",l)}function Dt(l,_,C){if(!(p===J.Off||!A))if(P===Ee.Text){let O;(p===J.Verbose||p===J.Compact)&&(l.error&&l.error.data?O=`Error data: ${We(l.error.data)}

`:l.result?O=`Result: ${We(l.result)}

`:l.error===void 0&&(O=`No result returned.

`)),A.log(`Sending response '${_} - (${l.id})'. Processing request took ${Date.now()-C}ms`,O)}else Qe("send-response",l)}function An(l){if(!(p===J.Off||!A))if(P===Ee.Text){let _;(p===J.Verbose||p===J.Compact)&&l.params&&(_=`Params: ${We(l.params)}

`),A.log(`Received request '${l.method} - (${l.id})'.`,_)}else Qe("receive-request",l)}function xt(l){if(!(p===J.Off||!A||l.method===nr.type.method))if(P===Ee.Text){let _;(p===J.Verbose||p===J.Compact)&&(l.params?_=`Params: ${We(l.params)}

`:_=`No parameters provided.

`),A.log(`Received notification '${l.method}'.`,_)}else Qe("receive-notification",l)}function Wn(l,_){if(!(p===J.Off||!A))if(P===Ee.Text){let C;if((p===J.Verbose||p===J.Compact)&&(l.error&&l.error.data?C=`Error data: ${We(l.error.data)}

`:l.result?C=`Result: ${We(l.result)}

`:l.error===void 0&&(C=`No result returned.

`)),_){let O=l.error?` Request failed: ${l.error.message} (${l.error.code}).`:"";A.log(`Received response '${_.method} - (${l.id})' in ${Date.now()-_.timerStart}ms.${O}`,C)}else A.log(`Received response ${l.id} without active response promise.`,C)}else Qe("receive-response",l)}function Qe(l,_){if(!A||p===J.Off)return;let C={isLSPMessage:!0,type:l,message:_,timestamp:Date.now()};A.log(C)}function it(){if(bt())throw new zt(yn.Closed,"Connection is closed.");if(Ke())throw new zt(yn.Disposed,"Connection is disposed.")}function Hn(){if(an())throw new zt(yn.AlreadyListening,"Connection is already listening")}function $n(){if(!an())throw new Error("Call listen() first.")}function Be(l){return l===void 0?null:l}function ln(l){if(l!==null)return l}function dn(l){return l!=null&&!Array.isArray(l)&&typeof l=="object"}function It(l,_){switch(l){case j.ParameterStructures.auto:return dn(_)?ln(_):[Be(_)];case j.ParameterStructures.byName:if(!dn(_))throw new Error("Received parameters by name but param is not an object literal.");return ln(_);case j.ParameterStructures.byPosition:return[Be(_)];default:throw new Error(`Unknown parameter structure ${l.toString()}`)}}function fn(l,_){let C,O=l.numberOfParams;switch(O){case 0:C=void 0;break;case 1:C=It(l.parameterStructures,_[0]);break;default:C=[];for(let K=0;K<_.length&&K<O;K++)C.push(Be(_[K]));if(_.length<O)for(let K=_.length;K<O;K++)C.push(null);break}return C}let Ye={sendNotification:(l,..._)=>{it();let C,O;if(ae.string(l)){C=l;let G=_[0],re=0,oe=j.ParameterStructures.auto;j.ParameterStructures.is(G)&&(re=1,oe=G);let W=_.length,Y=W-re;switch(Y){case 0:O=void 0;break;case 1:O=It(oe,_[re]);break;default:if(oe===j.ParameterStructures.byName)throw new Error(`Received ${Y} parameters for 'by Name' notification parameter structure.`);O=_.slice(re,W).map(V=>Be(V));break}}else{let G=_;C=l.method,O=fn(l,G)}let K={jsonrpc:k,method:C,params:O};return Ln(K),t.write(K).catch(G=>{throw i.error("Sending notification failed."),G})},onNotification:(l,_)=>{it();let C;return ae.func(l)?N=l:_&&(ae.string(l)?(C=l,E.set(l,{type:void 0,handler:_})):(C=l.method,E.set(l.method,{type:l,handler:_}))),{dispose:()=>{C!==void 0?E.delete(C):N=void 0}}},onProgress:(l,_,C)=>{if(Z.has(_))throw new Error(`Progress handler for token ${_} already registered`);return Z.set(_,C),{dispose:()=>{Z.delete(_)}}},sendProgress:(l,_,C)=>Ye.sendNotification(pn.type,{token:_,value:C}),onUnhandledProgress:nt.event,sendRequest:(l,..._)=>{it(),$n();let C,O,K;if(ae.string(l)){C=l;let W=_[0],Y=_[_.length-1],V=0,ce=j.ParameterStructures.auto;j.ParameterStructures.is(W)&&(V=1,ce=W);let me=_.length;uo.CancellationToken.is(Y)&&(me=me-1,K=Y);let Me=me-V;switch(Me){case 0:O=void 0;break;case 1:O=It(ce,_[V]);break;default:if(ce===j.ParameterStructures.byName)throw new Error(`Received ${Me} parameters for 'by Name' request parameter structure.`);O=_.slice(V,me).map(Un=>Be(Un));break}}else{let W=_;C=l.method,O=fn(l,W);let Y=l.numberOfParams;K=uo.CancellationToken.is(W[Y])?W[Y]:void 0}let G=c++,re;K&&(re=K.onCancellationRequested(()=>{let W=Ce.sender.sendCancellation(Ye,G);return W===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${G}`),Promise.resolve()):W.catch(()=>{i.log(`Sending cancellation messages for id ${G} failed`)})}));let oe={jsonrpc:k,id:G,method:C,params:O};return Fn(oe),typeof Ce.sender.enableCancellation=="function"&&Ce.sender.enableCancellation(oe),new Promise(async(W,Y)=>{let V=Me=>{W(Me),Ce.sender.cleanup(G),re?.dispose()},ce=Me=>{Y(Me),Ce.sender.cleanup(G),re?.dispose()},me={method:C,timerStart:Date.now(),resolve:V,reject:ce};try{await t.write(oe),Q.set(G,me)}catch(Me){throw i.error("Sending request failed."),me.reject(new j.ResponseError(j.ErrorCodes.MessageWriteError,Me.message?Me.message:"Unknown reason")),Me}})},onRequest:(l,_)=>{it();let C=null;return ho.is(l)?(C=void 0,w=l):ae.string(l)?(C=null,_!==void 0&&(C=l,q.set(l,{handler:_,type:void 0}))):_!==void 0&&(C=l.method,q.set(l.method,{type:l,handler:_})),{dispose:()=>{C!==null&&(C!==void 0?q.delete(C):w=void 0)}}},hasPendingResponse:()=>Q.size>0,trace:async(l,_,C)=>{let O=!1,K=Ee.Text;C!==void 0&&(ae.boolean(C)?O=C:(O=C.sendNotification||!1,K=C.traceFormat||Ee.Text)),p=l,P=K,p===J.Off?A=void 0:A=_,O&&!bt()&&!Ke()&&await Ye.sendNotification(go.type,{value:J.toString(l)})},onError:ee.event,onClose:be.event,onUnhandledNotification:vt.event,onDispose:rt.event,end:()=>{t.end()},dispose:()=>{if(Ke())return;X=Ue.Disposed,rt.fire(void 0);let l=new j.ResponseError(j.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let _ of Q.values())_.reject(l);Q=new Map,y=new Map,U=new Set,z=new Xs.LinkedMap,ae.func(t.dispose)&&t.dispose(),ae.func(e.dispose)&&e.dispose()},listen:()=>{it(),Hn(),X=Ue.Listening,e.listen(Nn)},inspect:()=>{(0,Gs.default)().console.log("inspect")}};return Ye.onNotification(nr.type,l=>{if(p===J.Off||!A)return;let _=p===J.Verbose||p===J.Compact;A.log(l.message,_?l.verbose:void 0)}),Ye.onNotification(pn.type,l=>{let _=Z.get(l.token);_?_(l.value):nt.fire(l)}),Ye}F.createMessageConnection=Wd});var cr=S(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.ProgressType=b.ProgressToken=b.createMessageConnection=b.NullLogger=b.ConnectionOptions=b.ConnectionStrategy=b.AbstractMessageBuffer=b.WriteableStreamMessageWriter=b.AbstractMessageWriter=b.MessageWriter=b.ReadableStreamMessageReader=b.AbstractMessageReader=b.MessageReader=b.SharedArrayReceiverStrategy=b.SharedArraySenderStrategy=b.CancellationToken=b.CancellationTokenSource=b.Emitter=b.Event=b.Disposable=b.LRUCache=b.Touch=b.LinkedMap=b.ParameterStructures=b.NotificationType9=b.NotificationType8=b.NotificationType7=b.NotificationType6=b.NotificationType5=b.NotificationType4=b.NotificationType3=b.NotificationType2=b.NotificationType1=b.NotificationType0=b.NotificationType=b.ErrorCodes=b.ResponseError=b.RequestType9=b.RequestType8=b.RequestType7=b.RequestType6=b.RequestType5=b.RequestType4=b.RequestType3=b.RequestType2=b.RequestType1=b.RequestType0=b.RequestType=b.Message=b.RAL=void 0;b.MessageStrategy=b.CancellationStrategy=b.CancellationSenderStrategy=b.CancellationReceiverStrategy=b.ConnectionError=b.ConnectionErrors=b.LogTraceNotification=b.SetTraceNotification=b.TraceFormat=b.TraceValues=b.Trace=void 0;var ne=Hi();Object.defineProperty(b,"Message",{enumerable:!0,get:function(){return ne.Message}});Object.defineProperty(b,"RequestType",{enumerable:!0,get:function(){return ne.RequestType}});Object.defineProperty(b,"RequestType0",{enumerable:!0,get:function(){return ne.RequestType0}});Object.defineProperty(b,"RequestType1",{enumerable:!0,get:function(){return ne.RequestType1}});Object.defineProperty(b,"RequestType2",{enumerable:!0,get:function(){return ne.RequestType2}});Object.defineProperty(b,"RequestType3",{enumerable:!0,get:function(){return ne.RequestType3}});Object.defineProperty(b,"RequestType4",{enumerable:!0,get:function(){return ne.RequestType4}});Object.defineProperty(b,"RequestType5",{enumerable:!0,get:function(){return ne.RequestType5}});Object.defineProperty(b,"RequestType6",{enumerable:!0,get:function(){return ne.RequestType6}});Object.defineProperty(b,"RequestType7",{enumerable:!0,get:function(){return ne.RequestType7}});Object.defineProperty(b,"RequestType8",{enumerable:!0,get:function(){return ne.RequestType8}});Object.defineProperty(b,"RequestType9",{enumerable:!0,get:function(){return ne.RequestType9}});Object.defineProperty(b,"ResponseError",{enumerable:!0,get:function(){return ne.ResponseError}});Object.defineProperty(b,"ErrorCodes",{enumerable:!0,get:function(){return ne.ErrorCodes}});Object.defineProperty(b,"NotificationType",{enumerable:!0,get:function(){return ne.NotificationType}});Object.defineProperty(b,"NotificationType0",{enumerable:!0,get:function(){return ne.NotificationType0}});Object.defineProperty(b,"NotificationType1",{enumerable:!0,get:function(){return ne.NotificationType1}});Object.defineProperty(b,"NotificationType2",{enumerable:!0,get:function(){return ne.NotificationType2}});Object.defineProperty(b,"NotificationType3",{enumerable:!0,get:function(){return ne.NotificationType3}});Object.defineProperty(b,"NotificationType4",{enumerable:!0,get:function(){return ne.NotificationType4}});Object.defineProperty(b,"NotificationType5",{enumerable:!0,get:function(){return ne.NotificationType5}});Object.defineProperty(b,"NotificationType6",{enumerable:!0,get:function(){return ne.NotificationType6}});Object.defineProperty(b,"NotificationType7",{enumerable:!0,get:function(){return ne.NotificationType7}});Object.defineProperty(b,"NotificationType8",{enumerable:!0,get:function(){return ne.NotificationType8}});Object.defineProperty(b,"NotificationType9",{enumerable:!0,get:function(){return ne.NotificationType9}});Object.defineProperty(b,"ParameterStructures",{enumerable:!0,get:function(){return ne.ParameterStructures}});var yo=Ui();Object.defineProperty(b,"LinkedMap",{enumerable:!0,get:function(){return yo.LinkedMap}});Object.defineProperty(b,"LRUCache",{enumerable:!0,get:function(){return yo.LRUCache}});Object.defineProperty(b,"Touch",{enumerable:!0,get:function(){return yo.Touch}});var Hd=Fs();Object.defineProperty(b,"Disposable",{enumerable:!0,get:function(){return Hd.Disposable}});var Zs=Wt();Object.defineProperty(b,"Event",{enumerable:!0,get:function(){return Zs.Event}});Object.defineProperty(b,"Emitter",{enumerable:!0,get:function(){return Zs.Emitter}});var ea=Qn();Object.defineProperty(b,"CancellationTokenSource",{enumerable:!0,get:function(){return ea.CancellationTokenSource}});Object.defineProperty(b,"CancellationToken",{enumerable:!0,get:function(){return ea.CancellationToken}});var ta=As();Object.defineProperty(b,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return ta.SharedArraySenderStrategy}});Object.defineProperty(b,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return ta.SharedArrayReceiverStrategy}});var vo=Hs();Object.defineProperty(b,"MessageReader",{enumerable:!0,get:function(){return vo.MessageReader}});Object.defineProperty(b,"AbstractMessageReader",{enumerable:!0,get:function(){return vo.AbstractMessageReader}});Object.defineProperty(b,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return vo.ReadableStreamMessageReader}});var bo=Bs();Object.defineProperty(b,"MessageWriter",{enumerable:!0,get:function(){return bo.MessageWriter}});Object.defineProperty(b,"AbstractMessageWriter",{enumerable:!0,get:function(){return bo.AbstractMessageWriter}});Object.defineProperty(b,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return bo.WriteableStreamMessageWriter}});var $d=Js();Object.defineProperty(b,"AbstractMessageBuffer",{enumerable:!0,get:function(){return $d.AbstractMessageBuffer}});var ve=Ys();Object.defineProperty(b,"ConnectionStrategy",{enumerable:!0,get:function(){return ve.ConnectionStrategy}});Object.defineProperty(b,"ConnectionOptions",{enumerable:!0,get:function(){return ve.ConnectionOptions}});Object.defineProperty(b,"NullLogger",{enumerable:!0,get:function(){return ve.NullLogger}});Object.defineProperty(b,"createMessageConnection",{enumerable:!0,get:function(){return ve.createMessageConnection}});Object.defineProperty(b,"ProgressToken",{enumerable:!0,get:function(){return ve.ProgressToken}});Object.defineProperty(b,"ProgressType",{enumerable:!0,get:function(){return ve.ProgressType}});Object.defineProperty(b,"Trace",{enumerable:!0,get:function(){return ve.Trace}});Object.defineProperty(b,"TraceValues",{enumerable:!0,get:function(){return ve.TraceValues}});Object.defineProperty(b,"TraceFormat",{enumerable:!0,get:function(){return ve.TraceFormat}});Object.defineProperty(b,"SetTraceNotification",{enumerable:!0,get:function(){return ve.SetTraceNotification}});Object.defineProperty(b,"LogTraceNotification",{enumerable:!0,get:function(){return ve.LogTraceNotification}});Object.defineProperty(b,"ConnectionErrors",{enumerable:!0,get:function(){return ve.ConnectionErrors}});Object.defineProperty(b,"ConnectionError",{enumerable:!0,get:function(){return ve.ConnectionError}});Object.defineProperty(b,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return ve.CancellationReceiverStrategy}});Object.defineProperty(b,"CancellationSenderStrategy",{enumerable:!0,get:function(){return ve.CancellationSenderStrategy}});Object.defineProperty(b,"CancellationStrategy",{enumerable:!0,get:function(){return ve.CancellationStrategy}});Object.defineProperty(b,"MessageStrategy",{enumerable:!0,get:function(){return ve.MessageStrategy}});var Ud=st();b.RAL=Ud.default});var ia=S(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});var na=require("util"),et=cr(),ur=class e extends et.AbstractMessageBuffer{constructor(t="utf-8"){super(t)}emptyBuffer(){return e.emptyBuffer}fromString(t,n){return Buffer.from(t,n)}toString(t,n){return t instanceof Buffer?t.toString(n):new na.TextDecoder(n).decode(t)}asNative(t,n){return n===void 0?t instanceof Buffer?t:Buffer.from(t):t instanceof Buffer?t.slice(0,n):Buffer.from(t,0,n)}allocNative(t){return Buffer.allocUnsafe(t)}};ur.emptyBuffer=Buffer.allocUnsafe(0);var _o=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),et.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),et.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),et.Disposable.create(()=>this.stream.off("end",t))}onData(t){return this.stream.on("data",t),et.Disposable.create(()=>this.stream.off("data",t))}},Do=class{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),et.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),et.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),et.Disposable.create(()=>this.stream.off("end",t))}write(t,n){return new Promise((r,i)=>{let c=h=>{h==null?r():i(h)};typeof t=="string"?this.stream.write(t,n,c):this.stream.write(t,c)})}end(){this.stream.end()}},ra=Object.freeze({messageBuffer:Object.freeze({create:e=>new ur(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new na.TextDecoder(t.charset).decode(e)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:e=>new _o(e),asWritableStream:e=>new Do(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){let r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){let n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){let r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function Ro(){return ra}(function(e){function t(){et.RAL.install(ra)}e.install=t})(Ro||(Ro={}));wo.default=Ro});var Tt=S($=>{"use strict";var zd=$&&$.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),Vd=$&&$.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&zd(t,e,n)};Object.defineProperty($,"__esModule",{value:!0});$.createMessageConnection=$.createServerSocketTransport=$.createClientSocketTransport=$.createServerPipeTransport=$.createClientPipeTransport=$.generateRandomPipeName=$.StreamMessageWriter=$.StreamMessageReader=$.SocketMessageWriter=$.SocketMessageReader=$.PortMessageWriter=$.PortMessageReader=$.IPCMessageWriter=$.IPCMessageReader=void 0;var Vt=ia();Vt.default.install();var oa=require("path"),Bd=require("os"),Jd=require("crypto"),fr=require("net"),Ne=cr();Vd(cr(),$);var Po=class extends Ne.AbstractMessageReader{constructor(t){super(),this.process=t;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(t){return this.process.on("message",t),Ne.Disposable.create(()=>this.process.off("message",t))}};$.IPCMessageReader=Po;var Co=class extends Ne.AbstractMessageWriter{constructor(t){super(),this.process=t,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(t){try{return typeof this.process.send=="function"&&this.process.send(t,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,t)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};$.IPCMessageWriter=Co;var To=class extends Ne.AbstractMessageReader{constructor(t){super(),this.onData=new Ne.Emitter,t.on("close",()=>this.fireClose),t.on("error",n=>this.fireError(n)),t.on("message",n=>{this.onData.fire(n)})}listen(t){return this.onData.event(t)}};$.PortMessageReader=To;var ko=class extends Ne.AbstractMessageWriter{constructor(t){super(),this.port=t,this.errorCount=0,t.on("close",()=>this.fireClose()),t.on("error",n=>this.fireError(n))}write(t){try{return this.port.postMessage(t),Promise.resolve()}catch(n){return this.handleError(n,t),Promise.reject(n)}}handleError(t,n){this.errorCount++,this.fireError(t,n,this.errorCount)}end(){}};$.PortMessageWriter=ko;var Pt=class extends Ne.ReadableStreamMessageReader{constructor(t,n="utf-8"){super((0,Vt.default)().stream.asReadableStream(t),n)}};$.SocketMessageReader=Pt;var Ct=class extends Ne.WriteableStreamMessageWriter{constructor(t,n){super((0,Vt.default)().stream.asWritableStream(t),n),this.socket=t}dispose(){super.dispose(),this.socket.destroy()}};$.SocketMessageWriter=Ct;var lr=class extends Ne.ReadableStreamMessageReader{constructor(t,n){super((0,Vt.default)().stream.asReadableStream(t),n)}};$.StreamMessageReader=lr;var dr=class extends Ne.WriteableStreamMessageWriter{constructor(t,n){super((0,Vt.default)().stream.asWritableStream(t),n)}};$.StreamMessageWriter=dr;var sa=process.env.XDG_RUNTIME_DIR,Gd=new Map([["linux",107],["darwin",103]]);function Xd(){let e=(0,Jd.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;sa?t=oa.join(sa,`vscode-ipc-${e}.sock`):t=oa.join(Bd.tmpdir(),`vscode-${e}.sock`);let n=Gd.get(process.platform);return n!==void 0&&t.length>n&&(0,Vt.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${n} characters.`),t}$.generateRandomPipeName=Xd;function Kd(e,t="utf-8"){let n,r=new Promise((i,c)=>{n=i});return new Promise((i,c)=>{let h=(0,fr.createServer)(v=>{h.close(),n([new Pt(v,t),new Ct(v,t)])});h.on("error",c),h.listen(e,()=>{h.removeListener("error",c),i({onConnected:()=>r})})})}$.createClientPipeTransport=Kd;function Qd(e,t="utf-8"){let n=(0,fr.createConnection)(e);return[new Pt(n,t),new Ct(n,t)]}$.createServerPipeTransport=Qd;function Yd(e,t="utf-8"){let n,r=new Promise((i,c)=>{n=i});return new Promise((i,c)=>{let h=(0,fr.createServer)(v=>{h.close(),n([new Pt(v,t),new Ct(v,t)])});h.on("error",c),h.listen(e,"127.0.0.1",()=>{h.removeListener("error",c),i({onConnected:()=>r})})})}$.createClientSocketTransport=Yd;function Zd(e,t="utf-8"){let n=(0,fr.createConnection)(e,"127.0.0.1");return[new Pt(n,t),new Ct(n,t)]}$.createServerSocketTransport=Zd;function ef(e){let t=e;return t.read!==void 0&&t.addListener!==void 0}function tf(e){let t=e;return t.write!==void 0&&t.addListener!==void 0}function nf(e,t,n,r){n||(n=Ne.NullLogger);let i=ef(e)?new lr(e):e,c=tf(t)?new dr(t):t;return Ne.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Ne.createMessageConnection)(i,c,n,r)}$.createMessageConnection=nf});var So=S((rg,aa)=>{"use strict";aa.exports=Tt()});var gr=S((ca,hr)=>{(function(e){if(typeof hr=="object"&&typeof hr.exports=="object"){var t=e(require,ca);t!==void 0&&(hr.exports=t)}else typeof define=="function"&&define.amd&&define(["require","exports"],e)})(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.WorkspaceFolder=t.InlineCompletionContext=t.SelectedCompletionInfo=t.InlineCompletionTriggerKind=t.InlineCompletionList=t.InlineCompletionItem=t.StringValue=t.InlayHint=t.InlayHintLabelPart=t.InlayHintKind=t.InlineValueContext=t.InlineValueEvaluatableExpression=t.InlineValueVariableLookup=t.InlineValueText=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionTriggerKind=t.CodeActionKind=t.DocumentSymbol=t.WorkspaceSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.CompletionItemLabelDetails=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=t.URI=t.DocumentUri=void 0;var n;(function(s){function d(f){return typeof f=="string"}s.is=d})(n||(t.DocumentUri=n={}));var r;(function(s){function d(f){return typeof f=="string"}s.is=d})(r||(t.URI=r={}));var i;(function(s){s.MIN_VALUE=-2147483648,s.MAX_VALUE=2147483647;function d(f){return typeof f=="number"&&s.MIN_VALUE<=f&&f<=s.MAX_VALUE}s.is=d})(i||(t.integer=i={}));var c;(function(s){s.MIN_VALUE=0,s.MAX_VALUE=2147483647;function d(f){return typeof f=="number"&&s.MIN_VALUE<=f&&f<=s.MAX_VALUE}s.is=d})(c||(t.uinteger=c={}));var h;(function(s){function d(a,o){return a===Number.MAX_VALUE&&(a=c.MAX_VALUE),o===Number.MAX_VALUE&&(o=c.MAX_VALUE),{line:a,character:o}}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&m.uinteger(o.line)&&m.uinteger(o.character)}s.is=f})(h||(t.Position=h={}));var v;(function(s){function d(a,o,g,D){if(m.uinteger(a)&&m.uinteger(o)&&m.uinteger(g)&&m.uinteger(D))return{start:h.create(a,o),end:h.create(g,D)};if(h.is(a)&&h.is(o))return{start:a,end:o};throw new Error("Range#create called with invalid arguments[".concat(a,", ").concat(o,", ").concat(g,", ").concat(D,"]"))}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&h.is(o.start)&&h.is(o.end)}s.is=f})(v||(t.Range=v={}));var k;(function(s){function d(a,o){return{uri:a,range:o}}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&v.is(o.range)&&(m.string(o.uri)||m.undefined(o.uri))}s.is=f})(k||(t.Location=k={}));var w;(function(s){function d(a,o,g,D){return{targetUri:a,targetRange:o,targetSelectionRange:g,originSelectionRange:D}}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&v.is(o.targetRange)&&m.string(o.targetUri)&&v.is(o.targetSelectionRange)&&(v.is(o.originSelectionRange)||m.undefined(o.originSelectionRange))}s.is=f})(w||(t.LocationLink=w={}));var q;(function(s){function d(a,o,g,D){return{red:a,green:o,blue:g,alpha:D}}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&m.numberRange(o.red,0,1)&&m.numberRange(o.green,0,1)&&m.numberRange(o.blue,0,1)&&m.numberRange(o.alpha,0,1)}s.is=f})(q||(t.Color=q={}));var N;(function(s){function d(a,o){return{range:a,color:o}}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&v.is(o.range)&&q.is(o.color)}s.is=f})(N||(t.ColorInformation=N={}));var E;(function(s){function d(a,o,g){return{label:a,textEdit:o,additionalTextEdits:g}}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&m.string(o.label)&&(m.undefined(o.textEdit)||A.is(o))&&(m.undefined(o.additionalTextEdits)||m.typedArray(o.additionalTextEdits,A.is))}s.is=f})(E||(t.ColorPresentation=E={}));var Z;(function(s){s.Comment="comment",s.Imports="imports",s.Region="region"})(Z||(t.FoldingRangeKind=Z={}));var ge;(function(s){function d(a,o,g,D,I,ue){var te={startLine:a,endLine:o};return m.defined(g)&&(te.startCharacter=g),m.defined(D)&&(te.endCharacter=D),m.defined(I)&&(te.kind=I),m.defined(ue)&&(te.collapsedText=ue),te}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&m.uinteger(o.startLine)&&m.uinteger(o.startLine)&&(m.undefined(o.startCharacter)||m.uinteger(o.startCharacter))&&(m.undefined(o.endCharacter)||m.uinteger(o.endCharacter))&&(m.undefined(o.kind)||m.string(o.kind))}s.is=f})(ge||(t.FoldingRange=ge={}));var z;(function(s){function d(a,o){return{location:a,message:o}}s.create=d;function f(a){var o=a;return m.defined(o)&&k.is(o.location)&&m.string(o.message)}s.is=f})(z||(t.DiagnosticRelatedInformation=z={}));var Q;(function(s){s.Error=1,s.Warning=2,s.Information=3,s.Hint=4})(Q||(t.DiagnosticSeverity=Q={}));var U;(function(s){s.Unnecessary=1,s.Deprecated=2})(U||(t.DiagnosticTag=U={}));var y;(function(s){function d(f){var a=f;return m.objectLiteral(a)&&m.string(a.href)}s.is=d})(y||(t.CodeDescription=y={}));var p;(function(s){function d(a,o,g,D,I,ue){var te={range:a,message:o};return m.defined(g)&&(te.severity=g),m.defined(D)&&(te.code=D),m.defined(I)&&(te.source=I),m.defined(ue)&&(te.relatedInformation=ue),te}s.create=d;function f(a){var o,g=a;return m.defined(g)&&v.is(g.range)&&m.string(g.message)&&(m.number(g.severity)||m.undefined(g.severity))&&(m.integer(g.code)||m.string(g.code)||m.undefined(g.code))&&(m.undefined(g.codeDescription)||m.string((o=g.codeDescription)===null||o===void 0?void 0:o.href))&&(m.string(g.source)||m.undefined(g.source))&&(m.undefined(g.relatedInformation)||m.typedArray(g.relatedInformation,z.is))}s.is=f})(p||(t.Diagnostic=p={}));var P;(function(s){function d(a,o){for(var g=[],D=2;D<arguments.length;D++)g[D-2]=arguments[D];var I={title:a,command:o};return m.defined(g)&&g.length>0&&(I.arguments=g),I}s.create=d;function f(a){var o=a;return m.defined(o)&&m.string(o.title)&&m.string(o.command)}s.is=f})(P||(t.Command=P={}));var A;(function(s){function d(g,D){return{range:g,newText:D}}s.replace=d;function f(g,D){return{range:{start:g,end:g},newText:D}}s.insert=f;function a(g){return{range:g,newText:""}}s.del=a;function o(g){var D=g;return m.objectLiteral(D)&&m.string(D.newText)&&v.is(D.range)}s.is=o})(A||(t.TextEdit=A={}));var X;(function(s){function d(a,o,g){var D={label:a};return o!==void 0&&(D.needsConfirmation=o),g!==void 0&&(D.description=g),D}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&m.string(o.label)&&(m.boolean(o.needsConfirmation)||o.needsConfirmation===void 0)&&(m.string(o.description)||o.description===void 0)}s.is=f})(X||(t.ChangeAnnotation=X={}));var ee;(function(s){function d(f){var a=f;return m.string(a)}s.is=d})(ee||(t.ChangeAnnotationIdentifier=ee={}));var be;(function(s){function d(g,D,I){return{range:g,newText:D,annotationId:I}}s.replace=d;function f(g,D,I){return{range:{start:g,end:g},newText:D,annotationId:I}}s.insert=f;function a(g,D){return{range:g,newText:"",annotationId:D}}s.del=a;function o(g){var D=g;return A.is(D)&&(X.is(D.annotationId)||ee.is(D.annotationId))}s.is=o})(be||(t.AnnotatedTextEdit=be={}));var vt;(function(s){function d(a,o){return{textDocument:a,edits:o}}s.create=d;function f(a){var o=a;return m.defined(o)&&bt.is(o.textDocument)&&Array.isArray(o.edits)}s.is=f})(vt||(t.TextDocumentEdit=vt={}));var nt;(function(s){function d(a,o,g){var D={kind:"create",uri:a};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(D.options=o),g!==void 0&&(D.annotationId=g),D}s.create=d;function f(a){var o=a;return o&&o.kind==="create"&&m.string(o.uri)&&(o.options===void 0||(o.options.overwrite===void 0||m.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||m.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||ee.is(o.annotationId))}s.is=f})(nt||(t.CreateFile=nt={}));var rt;(function(s){function d(a,o,g,D){var I={kind:"rename",oldUri:a,newUri:o};return g!==void 0&&(g.overwrite!==void 0||g.ignoreIfExists!==void 0)&&(I.options=g),D!==void 0&&(I.annotationId=D),I}s.create=d;function f(a){var o=a;return o&&o.kind==="rename"&&m.string(o.oldUri)&&m.string(o.newUri)&&(o.options===void 0||(o.options.overwrite===void 0||m.boolean(o.options.overwrite))&&(o.options.ignoreIfExists===void 0||m.boolean(o.options.ignoreIfExists)))&&(o.annotationId===void 0||ee.is(o.annotationId))}s.is=f})(rt||(t.RenameFile=rt={}));var Ce;(function(s){function d(a,o,g){var D={kind:"delete",uri:a};return o!==void 0&&(o.recursive!==void 0||o.ignoreIfNotExists!==void 0)&&(D.options=o),g!==void 0&&(D.annotationId=g),D}s.create=d;function f(a){var o=a;return o&&o.kind==="delete"&&m.string(o.uri)&&(o.options===void 0||(o.options.recursive===void 0||m.boolean(o.options.recursive))&&(o.options.ignoreIfNotExists===void 0||m.boolean(o.options.ignoreIfNotExists)))&&(o.annotationId===void 0||ee.is(o.annotationId))}s.is=f})(Ce||(t.DeleteFile=Ce={}));var Mt;(function(s){function d(f){var a=f;return a&&(a.changes!==void 0||a.documentChanges!==void 0)&&(a.documentChanges===void 0||a.documentChanges.every(function(o){return m.string(o.kind)?nt.is(o)||rt.is(o)||Ce.is(o):vt.is(o)}))}s.is=d})(Mt||(t.WorkspaceEdit=Mt={}));var Et=(function(){function s(d,f){this.edits=d,this.changeAnnotations=f}return s.prototype.insert=function(d,f,a){var o,g;if(a===void 0?o=A.insert(d,f):ee.is(a)?(g=a,o=be.insert(d,f,a)):(this.assertChangeAnnotations(this.changeAnnotations),g=this.changeAnnotations.manage(a),o=be.insert(d,f,g)),this.edits.push(o),g!==void 0)return g},s.prototype.replace=function(d,f,a){var o,g;if(a===void 0?o=A.replace(d,f):ee.is(a)?(g=a,o=be.replace(d,f,a)):(this.assertChangeAnnotations(this.changeAnnotations),g=this.changeAnnotations.manage(a),o=be.replace(d,f,g)),this.edits.push(o),g!==void 0)return g},s.prototype.delete=function(d,f){var a,o;if(f===void 0?a=A.del(d):ee.is(f)?(o=f,a=be.del(d,f)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(f),a=be.del(d,o)),this.edits.push(a),o!==void 0)return o},s.prototype.add=function(d){this.edits.push(d)},s.prototype.all=function(){return this.edits},s.prototype.clear=function(){this.edits.splice(0,this.edits.length)},s.prototype.assertChangeAnnotations=function(d){if(d===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},s})(),qn=(function(){function s(d){this._annotations=d===void 0?Object.create(null):d,this._counter=0,this._size=0}return s.prototype.all=function(){return this._annotations},Object.defineProperty(s.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),s.prototype.manage=function(d,f){var a;if(ee.is(d)?a=d:(a=this.nextId(),f=d),this._annotations[a]!==void 0)throw new Error("Id ".concat(a," is already in use."));if(f===void 0)throw new Error("No annotation provided for id ".concat(a));return this._annotations[a]=f,this._size++,a},s.prototype.nextId=function(){return this._counter++,this._counter.toString()},s})(),pi=(function(){function s(d){var f=this;this._textEditChanges=Object.create(null),d!==void 0?(this._workspaceEdit=d,d.documentChanges?(this._changeAnnotations=new qn(d.changeAnnotations),d.changeAnnotations=this._changeAnnotations.all(),d.documentChanges.forEach(function(a){if(vt.is(a)){var o=new Et(a.edits,f._changeAnnotations);f._textEditChanges[a.textDocument.uri]=o}})):d.changes&&Object.keys(d.changes).forEach(function(a){var o=new Et(d.changes[a]);f._textEditChanges[a]=o})):this._workspaceEdit={}}return Object.defineProperty(s.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),s.prototype.getTextEditChange=function(d){if(bt.is(d)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var f={uri:d.uri,version:d.version},a=this._textEditChanges[f.uri];if(!a){var o=[],g={textDocument:f,edits:o};this._workspaceEdit.documentChanges.push(g),a=new Et(o,this._changeAnnotations),this._textEditChanges[f.uri]=a}return a}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var a=this._textEditChanges[d];if(!a){var o=[];this._workspaceEdit.changes[d]=o,a=new Et(o),this._textEditChanges[d]=a}return a}},s.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new qn,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},s.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},s.prototype.createFile=function(d,f,a){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;X.is(f)||ee.is(f)?o=f:a=f;var g,D;if(o===void 0?g=nt.create(d,a):(D=ee.is(o)?o:this._changeAnnotations.manage(o),g=nt.create(d,a,D)),this._workspaceEdit.documentChanges.push(g),D!==void 0)return D},s.prototype.renameFile=function(d,f,a,o){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var g;X.is(a)||ee.is(a)?g=a:o=a;var D,I;if(g===void 0?D=rt.create(d,f,o):(I=ee.is(g)?g:this._changeAnnotations.manage(g),D=rt.create(d,f,o,I)),this._workspaceEdit.documentChanges.push(D),I!==void 0)return I},s.prototype.deleteFile=function(d,f,a){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;X.is(f)||ee.is(f)?o=f:a=f;var g,D;if(o===void 0?g=Ce.create(d,a):(D=ee.is(o)?o:this._changeAnnotations.manage(o),g=Ce.create(d,a,D)),this._workspaceEdit.documentChanges.push(g),D!==void 0)return D},s})();t.WorkspaceChange=pi;var On;(function(s){function d(a){return{uri:a}}s.create=d;function f(a){var o=a;return m.defined(o)&&m.string(o.uri)}s.is=f})(On||(t.TextDocumentIdentifier=On={}));var an;(function(s){function d(a,o){return{uri:a,version:o}}s.create=d;function f(a){var o=a;return m.defined(o)&&m.string(o.uri)&&m.integer(o.version)}s.is=f})(an||(t.VersionedTextDocumentIdentifier=an={}));var bt;(function(s){function d(a,o){return{uri:a,version:o}}s.create=d;function f(a){var o=a;return m.defined(o)&&m.string(o.uri)&&(o.version===null||m.integer(o.version))}s.is=f})(bt||(t.OptionalVersionedTextDocumentIdentifier=bt={}));var Ke;(function(s){function d(a,o,g,D){return{uri:a,languageId:o,version:g,text:D}}s.create=d;function f(a){var o=a;return m.defined(o)&&m.string(o.uri)&&m.string(o.languageId)&&m.integer(o.version)&&m.string(o.text)}s.is=f})(Ke||(t.TextDocumentItem=Ke={}));var Nt;(function(s){s.PlainText="plaintext",s.Markdown="markdown";function d(f){var a=f;return a===s.PlainText||a===s.Markdown}s.is=d})(Nt||(t.MarkupKind=Nt={}));var _t;(function(s){function d(f){var a=f;return m.objectLiteral(f)&&Nt.is(a.kind)&&m.string(a.value)}s.is=d})(_t||(t.MarkupContent=_t={}));var Mn;(function(s){s.Text=1,s.Method=2,s.Function=3,s.Constructor=4,s.Field=5,s.Variable=6,s.Class=7,s.Interface=8,s.Module=9,s.Property=10,s.Unit=11,s.Value=12,s.Enum=13,s.Keyword=14,s.Snippet=15,s.Color=16,s.File=17,s.Reference=18,s.Folder=19,s.EnumMember=20,s.Constant=21,s.Struct=22,s.Event=23,s.Operator=24,s.TypeParameter=25})(Mn||(t.CompletionItemKind=Mn={}));var cn;(function(s){s.PlainText=1,s.Snippet=2})(cn||(t.InsertTextFormat=cn={}));var un;(function(s){s.Deprecated=1})(un||(t.CompletionItemTag=un={}));var En;(function(s){function d(a,o,g){return{newText:a,insert:o,replace:g}}s.create=d;function f(a){var o=a;return o&&m.string(o.newText)&&v.is(o.insert)&&v.is(o.replace)}s.is=f})(En||(t.InsertReplaceEdit=En={}));var Nn;(function(s){s.asIs=1,s.adjustIndentation=2})(Nn||(t.InsertTextMode=Nn={}));var jn;(function(s){function d(f){var a=f;return a&&(m.string(a.detail)||a.detail===void 0)&&(m.string(a.description)||a.description===void 0)}s.is=d})(jn||(t.CompletionItemLabelDetails=jn={}));var xn;(function(s){function d(f){return{label:f}}s.create=d})(xn||(t.CompletionItem=xn={}));var In;(function(s){function d(f,a){return{items:f||[],isIncomplete:!!a}}s.create=d})(In||(t.CompletionList=In={}));var jt;(function(s){function d(a){return a.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s.fromPlainText=d;function f(a){var o=a;return m.string(o)||m.objectLiteral(o)&&m.string(o.language)&&m.string(o.value)}s.is=f})(jt||(t.MarkedString=jt={}));var We;(function(s){function d(f){var a=f;return!!a&&m.objectLiteral(a)&&(_t.is(a.contents)||jt.is(a.contents)||m.typedArray(a.contents,jt.is))&&(f.range===void 0||v.is(f.range))}s.is=d})(We||(t.Hover=We={}));var Fn;(function(s){function d(f,a){return a?{label:f,documentation:a}:{label:f}}s.create=d})(Fn||(t.ParameterInformation=Fn={}));var Ln;(function(s){function d(f,a){for(var o=[],g=2;g<arguments.length;g++)o[g-2]=arguments[g];var D={label:f};return m.defined(a)&&(D.documentation=a),m.defined(o)?D.parameters=o:D.parameters=[],D}s.create=d})(Ln||(t.SignatureInformation=Ln={}));var Dt;(function(s){s.Text=1,s.Read=2,s.Write=3})(Dt||(t.DocumentHighlightKind=Dt={}));var An;(function(s){function d(f,a){var o={range:f};return m.number(a)&&(o.kind=a),o}s.create=d})(An||(t.DocumentHighlight=An={}));var xt;(function(s){s.File=1,s.Module=2,s.Namespace=3,s.Package=4,s.Class=5,s.Method=6,s.Property=7,s.Field=8,s.Constructor=9,s.Enum=10,s.Interface=11,s.Function=12,s.Variable=13,s.Constant=14,s.String=15,s.Number=16,s.Boolean=17,s.Array=18,s.Object=19,s.Key=20,s.Null=21,s.EnumMember=22,s.Struct=23,s.Event=24,s.Operator=25,s.TypeParameter=26})(xt||(t.SymbolKind=xt={}));var Wn;(function(s){s.Deprecated=1})(Wn||(t.SymbolTag=Wn={}));var Qe;(function(s){function d(f,a,o,g,D){var I={name:f,kind:a,location:{uri:g,range:o}};return D&&(I.containerName=D),I}s.create=d})(Qe||(t.SymbolInformation=Qe={}));var it;(function(s){function d(f,a,o,g){return g!==void 0?{name:f,kind:a,location:{uri:o,range:g}}:{name:f,kind:a,location:{uri:o}}}s.create=d})(it||(t.WorkspaceSymbol=it={}));var Hn;(function(s){function d(a,o,g,D,I,ue){var te={name:a,detail:o,kind:g,range:D,selectionRange:I};return ue!==void 0&&(te.children=ue),te}s.create=d;function f(a){var o=a;return o&&m.string(o.name)&&m.number(o.kind)&&v.is(o.range)&&v.is(o.selectionRange)&&(o.detail===void 0||m.string(o.detail))&&(o.deprecated===void 0||m.boolean(o.deprecated))&&(o.children===void 0||Array.isArray(o.children))&&(o.tags===void 0||Array.isArray(o.tags))}s.is=f})(Hn||(t.DocumentSymbol=Hn={}));var $n;(function(s){s.Empty="",s.QuickFix="quickfix",s.Refactor="refactor",s.RefactorExtract="refactor.extract",s.RefactorInline="refactor.inline",s.RefactorRewrite="refactor.rewrite",s.Source="source",s.SourceOrganizeImports="source.organizeImports",s.SourceFixAll="source.fixAll"})($n||(t.CodeActionKind=$n={}));var Be;(function(s){s.Invoked=1,s.Automatic=2})(Be||(t.CodeActionTriggerKind=Be={}));var ln;(function(s){function d(a,o,g){var D={diagnostics:a};return o!=null&&(D.only=o),g!=null&&(D.triggerKind=g),D}s.create=d;function f(a){var o=a;return m.defined(o)&&m.typedArray(o.diagnostics,p.is)&&(o.only===void 0||m.typedArray(o.only,m.string))&&(o.triggerKind===void 0||o.triggerKind===Be.Invoked||o.triggerKind===Be.Automatic)}s.is=f})(ln||(t.CodeActionContext=ln={}));var dn;(function(s){function d(a,o,g){var D={title:a},I=!0;return typeof o=="string"?(I=!1,D.kind=o):P.is(o)?D.command=o:D.edit=o,I&&g!==void 0&&(D.kind=g),D}s.create=d;function f(a){var o=a;return o&&m.string(o.title)&&(o.diagnostics===void 0||m.typedArray(o.diagnostics,p.is))&&(o.kind===void 0||m.string(o.kind))&&(o.edit!==void 0||o.command!==void 0)&&(o.command===void 0||P.is(o.command))&&(o.isPreferred===void 0||m.boolean(o.isPreferred))&&(o.edit===void 0||Mt.is(o.edit))}s.is=f})(dn||(t.CodeAction=dn={}));var It;(function(s){function d(a,o){var g={range:a};return m.defined(o)&&(g.data=o),g}s.create=d;function f(a){var o=a;return m.defined(o)&&v.is(o.range)&&(m.undefined(o.command)||P.is(o.command))}s.is=f})(It||(t.CodeLens=It={}));var fn;(function(s){function d(a,o){return{tabSize:a,insertSpaces:o}}s.create=d;function f(a){var o=a;return m.defined(o)&&m.uinteger(o.tabSize)&&m.boolean(o.insertSpaces)}s.is=f})(fn||(t.FormattingOptions=fn={}));var Ye;(function(s){function d(a,o,g){return{range:a,target:o,data:g}}s.create=d;function f(a){var o=a;return m.defined(o)&&v.is(o.range)&&(m.undefined(o.target)||m.string(o.target))}s.is=f})(Ye||(t.DocumentLink=Ye={}));var l;(function(s){function d(a,o){return{range:a,parent:o}}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&v.is(o.range)&&(o.parent===void 0||s.is(o.parent))}s.is=f})(l||(t.SelectionRange=l={}));var _;(function(s){s.namespace="namespace",s.type="type",s.class="class",s.enum="enum",s.interface="interface",s.struct="struct",s.typeParameter="typeParameter",s.parameter="parameter",s.variable="variable",s.property="property",s.enumMember="enumMember",s.event="event",s.function="function",s.method="method",s.macro="macro",s.keyword="keyword",s.modifier="modifier",s.comment="comment",s.string="string",s.number="number",s.regexp="regexp",s.operator="operator",s.decorator="decorator"})(_||(t.SemanticTokenTypes=_={}));var C;(function(s){s.declaration="declaration",s.definition="definition",s.readonly="readonly",s.static="static",s.deprecated="deprecated",s.abstract="abstract",s.async="async",s.modification="modification",s.documentation="documentation",s.defaultLibrary="defaultLibrary"})(C||(t.SemanticTokenModifiers=C={}));var O;(function(s){function d(f){var a=f;return m.objectLiteral(a)&&(a.resultId===void 0||typeof a.resultId=="string")&&Array.isArray(a.data)&&(a.data.length===0||typeof a.data[0]=="number")}s.is=d})(O||(t.SemanticTokens=O={}));var K;(function(s){function d(a,o){return{range:a,text:o}}s.create=d;function f(a){var o=a;return o!=null&&v.is(o.range)&&m.string(o.text)}s.is=f})(K||(t.InlineValueText=K={}));var G;(function(s){function d(a,o,g){return{range:a,variableName:o,caseSensitiveLookup:g}}s.create=d;function f(a){var o=a;return o!=null&&v.is(o.range)&&m.boolean(o.caseSensitiveLookup)&&(m.string(o.variableName)||o.variableName===void 0)}s.is=f})(G||(t.InlineValueVariableLookup=G={}));var re;(function(s){function d(a,o){return{range:a,expression:o}}s.create=d;function f(a){var o=a;return o!=null&&v.is(o.range)&&(m.string(o.expression)||o.expression===void 0)}s.is=f})(re||(t.InlineValueEvaluatableExpression=re={}));var oe;(function(s){function d(a,o){return{frameId:a,stoppedLocation:o}}s.create=d;function f(a){var o=a;return m.defined(o)&&v.is(a.stoppedLocation)}s.is=f})(oe||(t.InlineValueContext=oe={}));var W;(function(s){s.Type=1,s.Parameter=2;function d(f){return f===1||f===2}s.is=d})(W||(t.InlayHintKind=W={}));var Y;(function(s){function d(a){return{value:a}}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&(o.tooltip===void 0||m.string(o.tooltip)||_t.is(o.tooltip))&&(o.location===void 0||k.is(o.location))&&(o.command===void 0||P.is(o.command))}s.is=f})(Y||(t.InlayHintLabelPart=Y={}));var V;(function(s){function d(a,o,g){var D={position:a,label:o};return g!==void 0&&(D.kind=g),D}s.create=d;function f(a){var o=a;return m.objectLiteral(o)&&h.is(o.position)&&(m.string(o.label)||m.typedArray(o.label,Y.is))&&(o.kind===void 0||W.is(o.kind))&&o.textEdits===void 0||m.typedArray(o.textEdits,A.is)&&(o.tooltip===void 0||m.string(o.tooltip)||_t.is(o.tooltip))&&(o.paddingLeft===void 0||m.boolean(o.paddingLeft))&&(o.paddingRight===void 0||m.boolean(o.paddingRight))}s.is=f})(V||(t.InlayHint=V={}));var ce;(function(s){function d(f){return{kind:"snippet",value:f}}s.createSnippet=d})(ce||(t.StringValue=ce={}));var me;(function(s){function d(f,a,o,g){return{insertText:f,filterText:a,range:o,command:g}}s.create=d})(me||(t.InlineCompletionItem=me={}));var Me;(function(s){function d(f){return{items:f}}s.create=d})(Me||(t.InlineCompletionList=Me={}));var Un;(function(s){s.Invoked=0,s.Automatic=1})(Un||(t.InlineCompletionTriggerKind=Un={}));var ws;(function(s){function d(f,a){return{range:f,text:a}}s.create=d})(ws||(t.SelectedCompletionInfo=ws={}));var Ps;(function(s){function d(f,a){return{triggerKind:f,selectedCompletionInfo:a}}s.create=d})(Ps||(t.InlineCompletionContext=Ps={}));var Cs;(function(s){function d(f){var a=f;return m.objectLiteral(a)&&r.is(a.uri)&&m.string(a.name)}s.is=d})(Cs||(t.WorkspaceFolder=Cs={})),t.EOL=[`
`,`\r
`,"\r"];var Ts;(function(s){function d(g,D,I,ue){return new ld(g,D,I,ue)}s.create=d;function f(g){var D=g;return!!(m.defined(D)&&m.string(D.uri)&&(m.undefined(D.languageId)||m.string(D.languageId))&&m.uinteger(D.lineCount)&&m.func(D.getText)&&m.func(D.positionAt)&&m.func(D.offsetAt))}s.is=f;function a(g,D){for(var I=g.getText(),ue=o(D,function(Ft,zn){var ks=Ft.range.start.line-zn.range.start.line;return ks===0?Ft.range.start.character-zn.range.start.character:ks}),te=I.length,He=ue.length-1;He>=0;He--){var $e=ue[He],Ze=g.offsetAt($e.range.start),H=g.offsetAt($e.range.end);if(H<=te)I=I.substring(0,Ze)+$e.newText+I.substring(H,I.length);else throw new Error("Overlapping edit");te=Ze}return I}s.applyEdits=a;function o(g,D){if(g.length<=1)return g;var I=g.length/2|0,ue=g.slice(0,I),te=g.slice(I);o(ue,D),o(te,D);for(var He=0,$e=0,Ze=0;He<ue.length&&$e<te.length;){var H=D(ue[He],te[$e]);H<=0?g[Ze++]=ue[He++]:g[Ze++]=te[$e++]}for(;He<ue.length;)g[Ze++]=ue[He++];for(;$e<te.length;)g[Ze++]=te[$e++];return g}})(Ts||(t.TextDocument=Ts={}));var ld=(function(){function s(d,f,a,o){this._uri=d,this._languageId=f,this._version=a,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(s.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),s.prototype.getText=function(d){if(d){var f=this.offsetAt(d.start),a=this.offsetAt(d.end);return this._content.substring(f,a)}return this._content},s.prototype.update=function(d,f){this._content=d.text,this._version=f,this._lineOffsets=void 0},s.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var d=[],f=this._content,a=!0,o=0;o<f.length;o++){a&&(d.push(o),a=!1);var g=f.charAt(o);a=g==="\r"||g===`
`,g==="\r"&&o+1<f.length&&f.charAt(o+1)===`
`&&o++}a&&f.length>0&&d.push(f.length),this._lineOffsets=d}return this._lineOffsets},s.prototype.positionAt=function(d){d=Math.max(Math.min(d,this._content.length),0);var f=this.getLineOffsets(),a=0,o=f.length;if(o===0)return h.create(0,d);for(;a<o;){var g=Math.floor((a+o)/2);f[g]>d?o=g:a=g+1}var D=a-1;return h.create(D,d-f[D])},s.prototype.offsetAt=function(d){var f=this.getLineOffsets();if(d.line>=f.length)return this._content.length;if(d.line<0)return 0;var a=f[d.line],o=d.line+1<f.length?f[d.line+1]:this._content.length;return Math.max(Math.min(a+d.character,o),a)},Object.defineProperty(s.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),s})(),m;(function(s){var d=Object.prototype.toString;function f(H){return typeof H<"u"}s.defined=f;function a(H){return typeof H>"u"}s.undefined=a;function o(H){return H===!0||H===!1}s.boolean=o;function g(H){return d.call(H)==="[object String]"}s.string=g;function D(H){return d.call(H)==="[object Number]"}s.number=D;function I(H,Ft,zn){return d.call(H)==="[object Number]"&&Ft<=H&&H<=zn}s.numberRange=I;function ue(H){return d.call(H)==="[object Number]"&&-2147483648<=H&&H<=2147483647}s.integer=ue;function te(H){return d.call(H)==="[object Number]"&&0<=H&&H<=2147483647}s.uinteger=te;function He(H){return d.call(H)==="[object Function]"}s.func=He;function $e(H){return H!==null&&typeof H=="object"}s.objectLiteral=$e;function Ze(H,Ft){return Array.isArray(H)&&H.every(Ft)}s.typedArray=Ze})(m||(m={}))})});var se=S(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.ProtocolNotificationType=ke.ProtocolNotificationType0=ke.ProtocolRequestType=ke.ProtocolRequestType0=ke.RegistrationType=ke.MessageDirection=void 0;var Bt=Tt(),ua;(function(e){e.clientToServer="clientToServer",e.serverToClient="serverToClient",e.both="both"})(ua||(ke.MessageDirection=ua={}));var qo=class{constructor(t){this.method=t}};ke.RegistrationType=qo;var Oo=class extends Bt.RequestType0{constructor(t){super(t)}};ke.ProtocolRequestType0=Oo;var Mo=class extends Bt.RequestType{constructor(t){super(t,Bt.ParameterStructures.byName)}};ke.ProtocolRequestType=Mo;var Eo=class extends Bt.NotificationType0{constructor(t){super(t)}};ke.ProtocolNotificationType0=Eo;var No=class extends Bt.NotificationType{constructor(t){super(t,Bt.ParameterStructures.byName)}};ke.ProtocolNotificationType=No});var mr=S(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.objectLiteral=he.typedArray=he.stringArray=he.array=he.func=he.error=he.number=he.string=he.boolean=void 0;function rf(e){return e===!0||e===!1}he.boolean=rf;function la(e){return typeof e=="string"||e instanceof String}he.string=la;function of(e){return typeof e=="number"||e instanceof Number}he.number=of;function sf(e){return e instanceof Error}he.error=sf;function af(e){return typeof e=="function"}he.func=af;function da(e){return Array.isArray(e)}he.array=da;function cf(e){return da(e)&&e.every(t=>la(t))}he.stringArray=cf;function uf(e,t){return Array.isArray(e)&&e.every(t)}he.typedArray=uf;function lf(e){return e!==null&&typeof e=="object"}he.objectLiteral=lf});var ga=S(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.ImplementationRequest=void 0;var fa=se(),ha;(function(e){e.method="textDocument/implementation",e.messageDirection=fa.MessageDirection.clientToServer,e.type=new fa.ProtocolRequestType(e.method)})(ha||(pr.ImplementationRequest=ha={}))});var ya=S(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.TypeDefinitionRequest=void 0;var ma=se(),pa;(function(e){e.method="textDocument/typeDefinition",e.messageDirection=ma.MessageDirection.clientToServer,e.type=new ma.ProtocolRequestType(e.method)})(pa||(yr.TypeDefinitionRequest=pa={}))});var _a=S(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.DidChangeWorkspaceFoldersNotification=Jt.WorkspaceFoldersRequest=void 0;var vr=se(),va;(function(e){e.method="workspace/workspaceFolders",e.messageDirection=vr.MessageDirection.serverToClient,e.type=new vr.ProtocolRequestType0(e.method)})(va||(Jt.WorkspaceFoldersRequest=va={}));var ba;(function(e){e.method="workspace/didChangeWorkspaceFolders",e.messageDirection=vr.MessageDirection.clientToServer,e.type=new vr.ProtocolNotificationType(e.method)})(ba||(Jt.DidChangeWorkspaceFoldersNotification=ba={}))});var wa=S(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.ConfigurationRequest=void 0;var Da=se(),Ra;(function(e){e.method="workspace/configuration",e.messageDirection=Da.MessageDirection.serverToClient,e.type=new Da.ProtocolRequestType(e.method)})(Ra||(br.ConfigurationRequest=Ra={}))});var Ta=S(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.ColorPresentationRequest=Gt.DocumentColorRequest=void 0;var _r=se(),Pa;(function(e){e.method="textDocument/documentColor",e.messageDirection=_r.MessageDirection.clientToServer,e.type=new _r.ProtocolRequestType(e.method)})(Pa||(Gt.DocumentColorRequest=Pa={}));var Ca;(function(e){e.method="textDocument/colorPresentation",e.messageDirection=_r.MessageDirection.clientToServer,e.type=new _r.ProtocolRequestType(e.method)})(Ca||(Gt.ColorPresentationRequest=Ca={}))});var qa=S(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.FoldingRangeRefreshRequest=Xt.FoldingRangeRequest=void 0;var Dr=se(),ka;(function(e){e.method="textDocument/foldingRange",e.messageDirection=Dr.MessageDirection.clientToServer,e.type=new Dr.ProtocolRequestType(e.method)})(ka||(Xt.FoldingRangeRequest=ka={}));var Sa;(function(e){e.method="workspace/foldingRange/refresh",e.messageDirection=Dr.MessageDirection.serverToClient,e.type=new Dr.ProtocolRequestType0(e.method)})(Sa||(Xt.FoldingRangeRefreshRequest=Sa={}))});var Ea=S(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.DeclarationRequest=void 0;var Oa=se(),Ma;(function(e){e.method="textDocument/declaration",e.messageDirection=Oa.MessageDirection.clientToServer,e.type=new Oa.ProtocolRequestType(e.method)})(Ma||(Rr.DeclarationRequest=Ma={}))});var xa=S(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.SelectionRangeRequest=void 0;var Na=se(),ja;(function(e){e.method="textDocument/selectionRange",e.messageDirection=Na.MessageDirection.clientToServer,e.type=new Na.ProtocolRequestType(e.method)})(ja||(wr.SelectionRangeRequest=ja={}))});var Aa=S(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.WorkDoneProgressCancelNotification=ut.WorkDoneProgressCreateRequest=ut.WorkDoneProgress=void 0;var df=Tt(),Pr=se(),Ia;(function(e){e.type=new df.ProgressType;function t(n){return n===e.type}e.is=t})(Ia||(ut.WorkDoneProgress=Ia={}));var Fa;(function(e){e.method="window/workDoneProgress/create",e.messageDirection=Pr.MessageDirection.serverToClient,e.type=new Pr.ProtocolRequestType(e.method)})(Fa||(ut.WorkDoneProgressCreateRequest=Fa={}));var La;(function(e){e.method="window/workDoneProgress/cancel",e.messageDirection=Pr.MessageDirection.clientToServer,e.type=new Pr.ProtocolNotificationType(e.method)})(La||(ut.WorkDoneProgressCancelNotification=La={}))});var Ua=S(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.CallHierarchyOutgoingCallsRequest=lt.CallHierarchyIncomingCallsRequest=lt.CallHierarchyPrepareRequest=void 0;var Kt=se(),Wa;(function(e){e.method="textDocument/prepareCallHierarchy",e.messageDirection=Kt.MessageDirection.clientToServer,e.type=new Kt.ProtocolRequestType(e.method)})(Wa||(lt.CallHierarchyPrepareRequest=Wa={}));var Ha;(function(e){e.method="callHierarchy/incomingCalls",e.messageDirection=Kt.MessageDirection.clientToServer,e.type=new Kt.ProtocolRequestType(e.method)})(Ha||(lt.CallHierarchyIncomingCallsRequest=Ha={}));var $a;(function(e){e.method="callHierarchy/outgoingCalls",e.messageDirection=Kt.MessageDirection.clientToServer,e.type=new Kt.ProtocolRequestType(e.method)})($a||(lt.CallHierarchyOutgoingCallsRequest=$a={}))});var Xa=S(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.SemanticTokensRefreshRequest=Se.SemanticTokensRangeRequest=Se.SemanticTokensDeltaRequest=Se.SemanticTokensRequest=Se.SemanticTokensRegistrationType=Se.TokenFormat=void 0;var tt=se(),za;(function(e){e.Relative="relative"})(za||(Se.TokenFormat=za={}));var bn;(function(e){e.method="textDocument/semanticTokens",e.type=new tt.RegistrationType(e.method)})(bn||(Se.SemanticTokensRegistrationType=bn={}));var Va;(function(e){e.method="textDocument/semanticTokens/full",e.messageDirection=tt.MessageDirection.clientToServer,e.type=new tt.ProtocolRequestType(e.method),e.registrationMethod=bn.method})(Va||(Se.SemanticTokensRequest=Va={}));var Ba;(function(e){e.method="textDocument/semanticTokens/full/delta",e.messageDirection=tt.MessageDirection.clientToServer,e.type=new tt.ProtocolRequestType(e.method),e.registrationMethod=bn.method})(Ba||(Se.SemanticTokensDeltaRequest=Ba={}));var Ja;(function(e){e.method="textDocument/semanticTokens/range",e.messageDirection=tt.MessageDirection.clientToServer,e.type=new tt.ProtocolRequestType(e.method),e.registrationMethod=bn.method})(Ja||(Se.SemanticTokensRangeRequest=Ja={}));var Ga;(function(e){e.method="workspace/semanticTokens/refresh",e.messageDirection=tt.MessageDirection.serverToClient,e.type=new tt.ProtocolRequestType0(e.method)})(Ga||(Se.SemanticTokensRefreshRequest=Ga={}))});var Ya=S(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.ShowDocumentRequest=void 0;var Ka=se(),Qa;(function(e){e.method="window/showDocument",e.messageDirection=Ka.MessageDirection.serverToClient,e.type=new Ka.ProtocolRequestType(e.method)})(Qa||(Cr.ShowDocumentRequest=Qa={}))});var tc=S(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.LinkedEditingRangeRequest=void 0;var Za=se(),ec;(function(e){e.method="textDocument/linkedEditingRange",e.messageDirection=Za.MessageDirection.clientToServer,e.type=new Za.ProtocolRequestType(e.method)})(ec||(Tr.LinkedEditingRangeRequest=ec={}))});var uc=S(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.WillDeleteFilesRequest=Re.DidDeleteFilesNotification=Re.DidRenameFilesNotification=Re.WillRenameFilesRequest=Re.DidCreateFilesNotification=Re.WillCreateFilesRequest=Re.FileOperationPatternKind=void 0;var je=se(),nc;(function(e){e.file="file",e.folder="folder"})(nc||(Re.FileOperationPatternKind=nc={}));var rc;(function(e){e.method="workspace/willCreateFiles",e.messageDirection=je.MessageDirection.clientToServer,e.type=new je.ProtocolRequestType(e.method)})(rc||(Re.WillCreateFilesRequest=rc={}));var ic;(function(e){e.method="workspace/didCreateFiles",e.messageDirection=je.MessageDirection.clientToServer,e.type=new je.ProtocolNotificationType(e.method)})(ic||(Re.DidCreateFilesNotification=ic={}));var oc;(function(e){e.method="workspace/willRenameFiles",e.messageDirection=je.MessageDirection.clientToServer,e.type=new je.ProtocolRequestType(e.method)})(oc||(Re.WillRenameFilesRequest=oc={}));var sc;(function(e){e.method="workspace/didRenameFiles",e.messageDirection=je.MessageDirection.clientToServer,e.type=new je.ProtocolNotificationType(e.method)})(sc||(Re.DidRenameFilesNotification=sc={}));var ac;(function(e){e.method="workspace/didDeleteFiles",e.messageDirection=je.MessageDirection.clientToServer,e.type=new je.ProtocolNotificationType(e.method)})(ac||(Re.DidDeleteFilesNotification=ac={}));var cc;(function(e){e.method="workspace/willDeleteFiles",e.messageDirection=je.MessageDirection.clientToServer,e.type=new je.ProtocolRequestType(e.method)})(cc||(Re.WillDeleteFilesRequest=cc={}))});var gc=S(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.MonikerRequest=dt.MonikerKind=dt.UniquenessLevel=void 0;var lc=se(),dc;(function(e){e.document="document",e.project="project",e.group="group",e.scheme="scheme",e.global="global"})(dc||(dt.UniquenessLevel=dc={}));var fc;(function(e){e.$import="import",e.$export="export",e.local="local"})(fc||(dt.MonikerKind=fc={}));var hc;(function(e){e.method="textDocument/moniker",e.messageDirection=lc.MessageDirection.clientToServer,e.type=new lc.ProtocolRequestType(e.method)})(hc||(dt.MonikerRequest=hc={}))});var vc=S(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.TypeHierarchySubtypesRequest=ft.TypeHierarchySupertypesRequest=ft.TypeHierarchyPrepareRequest=void 0;var Qt=se(),mc;(function(e){e.method="textDocument/prepareTypeHierarchy",e.messageDirection=Qt.MessageDirection.clientToServer,e.type=new Qt.ProtocolRequestType(e.method)})(mc||(ft.TypeHierarchyPrepareRequest=mc={}));var pc;(function(e){e.method="typeHierarchy/supertypes",e.messageDirection=Qt.MessageDirection.clientToServer,e.type=new Qt.ProtocolRequestType(e.method)})(pc||(ft.TypeHierarchySupertypesRequest=pc={}));var yc;(function(e){e.method="typeHierarchy/subtypes",e.messageDirection=Qt.MessageDirection.clientToServer,e.type=new Qt.ProtocolRequestType(e.method)})(yc||(ft.TypeHierarchySubtypesRequest=yc={}))});var Dc=S(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.InlineValueRefreshRequest=Yt.InlineValueRequest=void 0;var kr=se(),bc;(function(e){e.method="textDocument/inlineValue",e.messageDirection=kr.MessageDirection.clientToServer,e.type=new kr.ProtocolRequestType(e.method)})(bc||(Yt.InlineValueRequest=bc={}));var _c;(function(e){e.method="workspace/inlineValue/refresh",e.messageDirection=kr.MessageDirection.serverToClient,e.type=new kr.ProtocolRequestType0(e.method)})(_c||(Yt.InlineValueRefreshRequest=_c={}))});var Cc=S(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.InlayHintRefreshRequest=ht.InlayHintResolveRequest=ht.InlayHintRequest=void 0;var Zt=se(),Rc;(function(e){e.method="textDocument/inlayHint",e.messageDirection=Zt.MessageDirection.clientToServer,e.type=new Zt.ProtocolRequestType(e.method)})(Rc||(ht.InlayHintRequest=Rc={}));var wc;(function(e){e.method="inlayHint/resolve",e.messageDirection=Zt.MessageDirection.clientToServer,e.type=new Zt.ProtocolRequestType(e.method)})(wc||(ht.InlayHintResolveRequest=wc={}));var Pc;(function(e){e.method="workspace/inlayHint/refresh",e.messageDirection=Zt.MessageDirection.serverToClient,e.type=new Zt.ProtocolRequestType0(e.method)})(Pc||(ht.InlayHintRefreshRequest=Pc={}))});var Ec=S(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.DiagnosticRefreshRequest=xe.WorkspaceDiagnosticRequest=xe.DocumentDiagnosticRequest=xe.DocumentDiagnosticReportKind=xe.DiagnosticServerCancellationData=void 0;var Mc=Tt(),ff=mr(),en=se(),Tc;(function(e){function t(n){let r=n;return r&&ff.boolean(r.retriggerRequest)}e.is=t})(Tc||(xe.DiagnosticServerCancellationData=Tc={}));var kc;(function(e){e.Full="full",e.Unchanged="unchanged"})(kc||(xe.DocumentDiagnosticReportKind=kc={}));var Sc;(function(e){e.method="textDocument/diagnostic",e.messageDirection=en.MessageDirection.clientToServer,e.type=new en.ProtocolRequestType(e.method),e.partialResult=new Mc.ProgressType})(Sc||(xe.DocumentDiagnosticRequest=Sc={}));var qc;(function(e){e.method="workspace/diagnostic",e.messageDirection=en.MessageDirection.clientToServer,e.type=new en.ProtocolRequestType(e.method),e.partialResult=new Mc.ProgressType})(qc||(xe.WorkspaceDiagnosticRequest=qc={}));var Oc;(function(e){e.method="workspace/diagnostic/refresh",e.messageDirection=en.MessageDirection.serverToClient,e.type=new en.ProtocolRequestType0(e.method)})(Oc||(xe.DiagnosticRefreshRequest=Oc={}))});var Ac=S(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.DidCloseNotebookDocumentNotification=le.DidSaveNotebookDocumentNotification=le.DidChangeNotebookDocumentNotification=le.NotebookCellArrayChange=le.DidOpenNotebookDocumentNotification=le.NotebookDocumentSyncRegistrationType=le.NotebookDocument=le.NotebookCell=le.ExecutionSummary=le.NotebookCellKind=void 0;var _n=gr(),ze=mr(),Je=se(),jo;(function(e){e.Markup=1,e.Code=2;function t(n){return n===1||n===2}e.is=t})(jo||(le.NotebookCellKind=jo={}));var xo;(function(e){function t(i,c){let h={executionOrder:i};return(c===!0||c===!1)&&(h.success=c),h}e.create=t;function n(i){let c=i;return ze.objectLiteral(c)&&_n.uinteger.is(c.executionOrder)&&(c.success===void 0||ze.boolean(c.success))}e.is=n;function r(i,c){return i===c?!0:i==null||c===null||c===void 0?!1:i.executionOrder===c.executionOrder&&i.success===c.success}e.equals=r})(xo||(le.ExecutionSummary=xo={}));var Sr;(function(e){function t(c,h){return{kind:c,document:h}}e.create=t;function n(c){let h=c;return ze.objectLiteral(h)&&jo.is(h.kind)&&_n.DocumentUri.is(h.document)&&(h.metadata===void 0||ze.objectLiteral(h.metadata))}e.is=n;function r(c,h){let v=new Set;return c.document!==h.document&&v.add("document"),c.kind!==h.kind&&v.add("kind"),c.executionSummary!==h.executionSummary&&v.add("executionSummary"),(c.metadata!==void 0||h.metadata!==void 0)&&!i(c.metadata,h.metadata)&&v.add("metadata"),(c.executionSummary!==void 0||h.executionSummary!==void 0)&&!xo.equals(c.executionSummary,h.executionSummary)&&v.add("executionSummary"),v}e.diff=r;function i(c,h){if(c===h)return!0;if(c==null||h===null||h===void 0||typeof c!=typeof h||typeof c!="object")return!1;let v=Array.isArray(c),k=Array.isArray(h);if(v!==k)return!1;if(v&&k){if(c.length!==h.length)return!1;for(let w=0;w<c.length;w++)if(!i(c[w],h[w]))return!1}if(ze.objectLiteral(c)&&ze.objectLiteral(h)){let w=Object.keys(c),q=Object.keys(h);if(w.length!==q.length||(w.sort(),q.sort(),!i(w,q)))return!1;for(let N=0;N<w.length;N++){let E=w[N];if(!i(c[E],h[E]))return!1}}return!0}})(Sr||(le.NotebookCell=Sr={}));var Nc;(function(e){function t(r,i,c,h){return{uri:r,notebookType:i,version:c,cells:h}}e.create=t;function n(r){let i=r;return ze.objectLiteral(i)&&ze.string(i.uri)&&_n.integer.is(i.version)&&ze.typedArray(i.cells,Sr.is)}e.is=n})(Nc||(le.NotebookDocument=Nc={}));var tn;(function(e){e.method="notebookDocument/sync",e.messageDirection=Je.MessageDirection.clientToServer,e.type=new Je.RegistrationType(e.method)})(tn||(le.NotebookDocumentSyncRegistrationType=tn={}));var jc;(function(e){e.method="notebookDocument/didOpen",e.messageDirection=Je.MessageDirection.clientToServer,e.type=new Je.ProtocolNotificationType(e.method),e.registrationMethod=tn.method})(jc||(le.DidOpenNotebookDocumentNotification=jc={}));var xc;(function(e){function t(r){let i=r;return ze.objectLiteral(i)&&_n.uinteger.is(i.start)&&_n.uinteger.is(i.deleteCount)&&(i.cells===void 0||ze.typedArray(i.cells,Sr.is))}e.is=t;function n(r,i,c){let h={start:r,deleteCount:i};return c!==void 0&&(h.cells=c),h}e.create=n})(xc||(le.NotebookCellArrayChange=xc={}));var Ic;(function(e){e.method="notebookDocument/didChange",e.messageDirection=Je.MessageDirection.clientToServer,e.type=new Je.ProtocolNotificationType(e.method),e.registrationMethod=tn.method})(Ic||(le.DidChangeNotebookDocumentNotification=Ic={}));var Fc;(function(e){e.method="notebookDocument/didSave",e.messageDirection=Je.MessageDirection.clientToServer,e.type=new Je.ProtocolNotificationType(e.method),e.registrationMethod=tn.method})(Fc||(le.DidSaveNotebookDocumentNotification=Fc={}));var Lc;(function(e){e.method="notebookDocument/didClose",e.messageDirection=Je.MessageDirection.clientToServer,e.type=new Je.ProtocolNotificationType(e.method),e.registrationMethod=tn.method})(Lc||(le.DidCloseNotebookDocumentNotification=Lc={}))});var $c=S(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.InlineCompletionRequest=void 0;var Wc=se(),Hc;(function(e){e.method="textDocument/inlineCompletion",e.messageDirection=Wc.MessageDirection.clientToServer,e.type=new Wc.ProtocolRequestType(e.method)})(Hc||(qr.InlineCompletionRequest=Hc={}))});var tl=S(u=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0});u.WorkspaceSymbolRequest=u.CodeActionResolveRequest=u.CodeActionRequest=u.DocumentSymbolRequest=u.DocumentHighlightRequest=u.ReferencesRequest=u.DefinitionRequest=u.SignatureHelpRequest=u.SignatureHelpTriggerKind=u.HoverRequest=u.CompletionResolveRequest=u.CompletionRequest=u.CompletionTriggerKind=u.PublishDiagnosticsNotification=u.WatchKind=u.RelativePattern=u.FileChangeType=u.DidChangeWatchedFilesNotification=u.WillSaveTextDocumentWaitUntilRequest=u.WillSaveTextDocumentNotification=u.TextDocumentSaveReason=u.DidSaveTextDocumentNotification=u.DidCloseTextDocumentNotification=u.DidChangeTextDocumentNotification=u.TextDocumentContentChangeEvent=u.DidOpenTextDocumentNotification=u.TextDocumentSyncKind=u.TelemetryEventNotification=u.LogMessageNotification=u.ShowMessageRequest=u.ShowMessageNotification=u.MessageType=u.DidChangeConfigurationNotification=u.ExitNotification=u.ShutdownRequest=u.InitializedNotification=u.InitializeErrorCodes=u.InitializeRequest=u.WorkDoneProgressOptions=u.TextDocumentRegistrationOptions=u.StaticRegistrationOptions=u.PositionEncodingKind=u.FailureHandlingKind=u.ResourceOperationKind=u.UnregistrationRequest=u.RegistrationRequest=u.DocumentSelector=u.NotebookCellTextDocumentFilter=u.NotebookDocumentFilter=u.TextDocumentFilter=void 0;u.MonikerRequest=u.MonikerKind=u.UniquenessLevel=u.WillDeleteFilesRequest=u.DidDeleteFilesNotification=u.WillRenameFilesRequest=u.DidRenameFilesNotification=u.WillCreateFilesRequest=u.DidCreateFilesNotification=u.FileOperationPatternKind=u.LinkedEditingRangeRequest=u.ShowDocumentRequest=u.SemanticTokensRegistrationType=u.SemanticTokensRefreshRequest=u.SemanticTokensRangeRequest=u.SemanticTokensDeltaRequest=u.SemanticTokensRequest=u.TokenFormat=u.CallHierarchyPrepareRequest=u.CallHierarchyOutgoingCallsRequest=u.CallHierarchyIncomingCallsRequest=u.WorkDoneProgressCancelNotification=u.WorkDoneProgressCreateRequest=u.WorkDoneProgress=u.SelectionRangeRequest=u.DeclarationRequest=u.FoldingRangeRefreshRequest=u.FoldingRangeRequest=u.ColorPresentationRequest=u.DocumentColorRequest=u.ConfigurationRequest=u.DidChangeWorkspaceFoldersNotification=u.WorkspaceFoldersRequest=u.TypeDefinitionRequest=u.ImplementationRequest=u.ApplyWorkspaceEditRequest=u.ExecuteCommandRequest=u.PrepareRenameRequest=u.RenameRequest=u.PrepareSupportDefaultBehavior=u.DocumentOnTypeFormattingRequest=u.DocumentRangesFormattingRequest=u.DocumentRangeFormattingRequest=u.DocumentFormattingRequest=u.DocumentLinkResolveRequest=u.DocumentLinkRequest=u.CodeLensRefreshRequest=u.CodeLensResolveRequest=u.CodeLensRequest=u.WorkspaceSymbolResolveRequest=void 0;u.InlineCompletionRequest=u.DidCloseNotebookDocumentNotification=u.DidSaveNotebookDocumentNotification=u.DidChangeNotebookDocumentNotification=u.NotebookCellArrayChange=u.DidOpenNotebookDocumentNotification=u.NotebookDocumentSyncRegistrationType=u.NotebookDocument=u.NotebookCell=u.ExecutionSummary=u.NotebookCellKind=u.DiagnosticRefreshRequest=u.WorkspaceDiagnosticRequest=u.DocumentDiagnosticRequest=u.DocumentDiagnosticReportKind=u.DiagnosticServerCancellationData=u.InlayHintRefreshRequest=u.InlayHintResolveRequest=u.InlayHintRequest=u.InlineValueRefreshRequest=u.InlineValueRequest=u.TypeHierarchySupertypesRequest=u.TypeHierarchySubtypesRequest=u.TypeHierarchyPrepareRequest=void 0;var R=se(),Uc=gr(),pe=mr(),hf=ga();Object.defineProperty(u,"ImplementationRequest",{enumerable:!0,get:function(){return hf.ImplementationRequest}});var gf=ya();Object.defineProperty(u,"TypeDefinitionRequest",{enumerable:!0,get:function(){return gf.TypeDefinitionRequest}});var Qu=_a();Object.defineProperty(u,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Qu.WorkspaceFoldersRequest}});Object.defineProperty(u,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Qu.DidChangeWorkspaceFoldersNotification}});var mf=wa();Object.defineProperty(u,"ConfigurationRequest",{enumerable:!0,get:function(){return mf.ConfigurationRequest}});var Yu=Ta();Object.defineProperty(u,"DocumentColorRequest",{enumerable:!0,get:function(){return Yu.DocumentColorRequest}});Object.defineProperty(u,"ColorPresentationRequest",{enumerable:!0,get:function(){return Yu.ColorPresentationRequest}});var Zu=qa();Object.defineProperty(u,"FoldingRangeRequest",{enumerable:!0,get:function(){return Zu.FoldingRangeRequest}});Object.defineProperty(u,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return Zu.FoldingRangeRefreshRequest}});var pf=Ea();Object.defineProperty(u,"DeclarationRequest",{enumerable:!0,get:function(){return pf.DeclarationRequest}});var yf=xa();Object.defineProperty(u,"SelectionRangeRequest",{enumerable:!0,get:function(){return yf.SelectionRangeRequest}});var Wo=Aa();Object.defineProperty(u,"WorkDoneProgress",{enumerable:!0,get:function(){return Wo.WorkDoneProgress}});Object.defineProperty(u,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return Wo.WorkDoneProgressCreateRequest}});Object.defineProperty(u,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return Wo.WorkDoneProgressCancelNotification}});var Ho=Ua();Object.defineProperty(u,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return Ho.CallHierarchyIncomingCallsRequest}});Object.defineProperty(u,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return Ho.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(u,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return Ho.CallHierarchyPrepareRequest}});var nn=Xa();Object.defineProperty(u,"TokenFormat",{enumerable:!0,get:function(){return nn.TokenFormat}});Object.defineProperty(u,"SemanticTokensRequest",{enumerable:!0,get:function(){return nn.SemanticTokensRequest}});Object.defineProperty(u,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return nn.SemanticTokensDeltaRequest}});Object.defineProperty(u,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return nn.SemanticTokensRangeRequest}});Object.defineProperty(u,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return nn.SemanticTokensRefreshRequest}});Object.defineProperty(u,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return nn.SemanticTokensRegistrationType}});var vf=Ya();Object.defineProperty(u,"ShowDocumentRequest",{enumerable:!0,get:function(){return vf.ShowDocumentRequest}});var bf=tc();Object.defineProperty(u,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return bf.LinkedEditingRangeRequest}});var kt=uc();Object.defineProperty(u,"FileOperationPatternKind",{enumerable:!0,get:function(){return kt.FileOperationPatternKind}});Object.defineProperty(u,"DidCreateFilesNotification",{enumerable:!0,get:function(){return kt.DidCreateFilesNotification}});Object.defineProperty(u,"WillCreateFilesRequest",{enumerable:!0,get:function(){return kt.WillCreateFilesRequest}});Object.defineProperty(u,"DidRenameFilesNotification",{enumerable:!0,get:function(){return kt.DidRenameFilesNotification}});Object.defineProperty(u,"WillRenameFilesRequest",{enumerable:!0,get:function(){return kt.WillRenameFilesRequest}});Object.defineProperty(u,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return kt.DidDeleteFilesNotification}});Object.defineProperty(u,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return kt.WillDeleteFilesRequest}});var $o=gc();Object.defineProperty(u,"UniquenessLevel",{enumerable:!0,get:function(){return $o.UniquenessLevel}});Object.defineProperty(u,"MonikerKind",{enumerable:!0,get:function(){return $o.MonikerKind}});Object.defineProperty(u,"MonikerRequest",{enumerable:!0,get:function(){return $o.MonikerRequest}});var Uo=vc();Object.defineProperty(u,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return Uo.TypeHierarchyPrepareRequest}});Object.defineProperty(u,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return Uo.TypeHierarchySubtypesRequest}});Object.defineProperty(u,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return Uo.TypeHierarchySupertypesRequest}});var el=Dc();Object.defineProperty(u,"InlineValueRequest",{enumerable:!0,get:function(){return el.InlineValueRequest}});Object.defineProperty(u,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return el.InlineValueRefreshRequest}});var zo=Cc();Object.defineProperty(u,"InlayHintRequest",{enumerable:!0,get:function(){return zo.InlayHintRequest}});Object.defineProperty(u,"InlayHintResolveRequest",{enumerable:!0,get:function(){return zo.InlayHintResolveRequest}});Object.defineProperty(u,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return zo.InlayHintRefreshRequest}});var Dn=Ec();Object.defineProperty(u,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Dn.DiagnosticServerCancellationData}});Object.defineProperty(u,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Dn.DocumentDiagnosticReportKind}});Object.defineProperty(u,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Dn.DocumentDiagnosticRequest}});Object.defineProperty(u,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Dn.WorkspaceDiagnosticRequest}});Object.defineProperty(u,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Dn.DiagnosticRefreshRequest}});var Ge=Ac();Object.defineProperty(u,"NotebookCellKind",{enumerable:!0,get:function(){return Ge.NotebookCellKind}});Object.defineProperty(u,"ExecutionSummary",{enumerable:!0,get:function(){return Ge.ExecutionSummary}});Object.defineProperty(u,"NotebookCell",{enumerable:!0,get:function(){return Ge.NotebookCell}});Object.defineProperty(u,"NotebookDocument",{enumerable:!0,get:function(){return Ge.NotebookDocument}});Object.defineProperty(u,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Ge.NotebookDocumentSyncRegistrationType}});Object.defineProperty(u,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Ge.DidOpenNotebookDocumentNotification}});Object.defineProperty(u,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Ge.NotebookCellArrayChange}});Object.defineProperty(u,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Ge.DidChangeNotebookDocumentNotification}});Object.defineProperty(u,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Ge.DidSaveNotebookDocumentNotification}});Object.defineProperty(u,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Ge.DidCloseNotebookDocumentNotification}});var _f=$c();Object.defineProperty(u,"InlineCompletionRequest",{enumerable:!0,get:function(){return _f.InlineCompletionRequest}});var Io;(function(e){function t(n){let r=n;return pe.string(r)||pe.string(r.language)||pe.string(r.scheme)||pe.string(r.pattern)}e.is=t})(Io||(u.TextDocumentFilter=Io={}));var Fo;(function(e){function t(n){let r=n;return pe.objectLiteral(r)&&(pe.string(r.notebookType)||pe.string(r.scheme)||pe.string(r.pattern))}e.is=t})(Fo||(u.NotebookDocumentFilter=Fo={}));var Lo;(function(e){function t(n){let r=n;return pe.objectLiteral(r)&&(pe.string(r.notebook)||Fo.is(r.notebook))&&(r.language===void 0||pe.string(r.language))}e.is=t})(Lo||(u.NotebookCellTextDocumentFilter=Lo={}));var Ao;(function(e){function t(n){if(!Array.isArray(n))return!1;for(let r of n)if(!pe.string(r)&&!Io.is(r)&&!Lo.is(r))return!1;return!0}e.is=t})(Ao||(u.DocumentSelector=Ao={}));var zc;(function(e){e.method="client/registerCapability",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolRequestType(e.method)})(zc||(u.RegistrationRequest=zc={}));var Vc;(function(e){e.method="client/unregisterCapability",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolRequestType(e.method)})(Vc||(u.UnregistrationRequest=Vc={}));var Bc;(function(e){e.Create="create",e.Rename="rename",e.Delete="delete"})(Bc||(u.ResourceOperationKind=Bc={}));var Jc;(function(e){e.Abort="abort",e.Transactional="transactional",e.TextOnlyTransactional="textOnlyTransactional",e.Undo="undo"})(Jc||(u.FailureHandlingKind=Jc={}));var Gc;(function(e){e.UTF8="utf-8",e.UTF16="utf-16",e.UTF32="utf-32"})(Gc||(u.PositionEncodingKind=Gc={}));var Xc;(function(e){function t(n){let r=n;return r&&pe.string(r.id)&&r.id.length>0}e.hasId=t})(Xc||(u.StaticRegistrationOptions=Xc={}));var Kc;(function(e){function t(n){let r=n;return r&&(r.documentSelector===null||Ao.is(r.documentSelector))}e.is=t})(Kc||(u.TextDocumentRegistrationOptions=Kc={}));var Qc;(function(e){function t(r){let i=r;return pe.objectLiteral(i)&&(i.workDoneProgress===void 0||pe.boolean(i.workDoneProgress))}e.is=t;function n(r){let i=r;return i&&pe.boolean(i.workDoneProgress)}e.hasWorkDoneProgress=n})(Qc||(u.WorkDoneProgressOptions=Qc={}));var Yc;(function(e){e.method="initialize",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Yc||(u.InitializeRequest=Yc={}));var Zc;(function(e){e.unknownProtocolVersion=1})(Zc||(u.InitializeErrorCodes=Zc={}));var eu;(function(e){e.method="initialized",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(eu||(u.InitializedNotification=eu={}));var tu;(function(e){e.method="shutdown",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType0(e.method)})(tu||(u.ShutdownRequest=tu={}));var nu;(function(e){e.method="exit",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType0(e.method)})(nu||(u.ExitNotification=nu={}));var ru;(function(e){e.method="workspace/didChangeConfiguration",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(ru||(u.DidChangeConfigurationNotification=ru={}));var iu;(function(e){e.Error=1,e.Warning=2,e.Info=3,e.Log=4,e.Debug=5})(iu||(u.MessageType=iu={}));var ou;(function(e){e.method="window/showMessage",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolNotificationType(e.method)})(ou||(u.ShowMessageNotification=ou={}));var su;(function(e){e.method="window/showMessageRequest",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolRequestType(e.method)})(su||(u.ShowMessageRequest=su={}));var au;(function(e){e.method="window/logMessage",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolNotificationType(e.method)})(au||(u.LogMessageNotification=au={}));var cu;(function(e){e.method="telemetry/event",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolNotificationType(e.method)})(cu||(u.TelemetryEventNotification=cu={}));var uu;(function(e){e.None=0,e.Full=1,e.Incremental=2})(uu||(u.TextDocumentSyncKind=uu={}));var lu;(function(e){e.method="textDocument/didOpen",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(lu||(u.DidOpenTextDocumentNotification=lu={}));var du;(function(e){function t(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}e.isIncremental=t;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}e.isFull=n})(du||(u.TextDocumentContentChangeEvent=du={}));var fu;(function(e){e.method="textDocument/didChange",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(fu||(u.DidChangeTextDocumentNotification=fu={}));var hu;(function(e){e.method="textDocument/didClose",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(hu||(u.DidCloseTextDocumentNotification=hu={}));var gu;(function(e){e.method="textDocument/didSave",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(gu||(u.DidSaveTextDocumentNotification=gu={}));var mu;(function(e){e.Manual=1,e.AfterDelay=2,e.FocusOut=3})(mu||(u.TextDocumentSaveReason=mu={}));var pu;(function(e){e.method="textDocument/willSave",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(pu||(u.WillSaveTextDocumentNotification=pu={}));var yu;(function(e){e.method="textDocument/willSaveWaitUntil",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(yu||(u.WillSaveTextDocumentWaitUntilRequest=yu={}));var vu;(function(e){e.method="workspace/didChangeWatchedFiles",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolNotificationType(e.method)})(vu||(u.DidChangeWatchedFilesNotification=vu={}));var bu;(function(e){e.Created=1,e.Changed=2,e.Deleted=3})(bu||(u.FileChangeType=bu={}));var _u;(function(e){function t(n){let r=n;return pe.objectLiteral(r)&&(Uc.URI.is(r.baseUri)||Uc.WorkspaceFolder.is(r.baseUri))&&pe.string(r.pattern)}e.is=t})(_u||(u.RelativePattern=_u={}));var Du;(function(e){e.Create=1,e.Change=2,e.Delete=4})(Du||(u.WatchKind=Du={}));var Ru;(function(e){e.method="textDocument/publishDiagnostics",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolNotificationType(e.method)})(Ru||(u.PublishDiagnosticsNotification=Ru={}));var wu;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.TriggerForIncompleteCompletions=3})(wu||(u.CompletionTriggerKind=wu={}));var Pu;(function(e){e.method="textDocument/completion",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Pu||(u.CompletionRequest=Pu={}));var Cu;(function(e){e.method="completionItem/resolve",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Cu||(u.CompletionResolveRequest=Cu={}));var Tu;(function(e){e.method="textDocument/hover",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Tu||(u.HoverRequest=Tu={}));var ku;(function(e){e.Invoked=1,e.TriggerCharacter=2,e.ContentChange=3})(ku||(u.SignatureHelpTriggerKind=ku={}));var Su;(function(e){e.method="textDocument/signatureHelp",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Su||(u.SignatureHelpRequest=Su={}));var qu;(function(e){e.method="textDocument/definition",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(qu||(u.DefinitionRequest=qu={}));var Ou;(function(e){e.method="textDocument/references",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Ou||(u.ReferencesRequest=Ou={}));var Mu;(function(e){e.method="textDocument/documentHighlight",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Mu||(u.DocumentHighlightRequest=Mu={}));var Eu;(function(e){e.method="textDocument/documentSymbol",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Eu||(u.DocumentSymbolRequest=Eu={}));var Nu;(function(e){e.method="textDocument/codeAction",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Nu||(u.CodeActionRequest=Nu={}));var ju;(function(e){e.method="codeAction/resolve",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(ju||(u.CodeActionResolveRequest=ju={}));var xu;(function(e){e.method="workspace/symbol",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(xu||(u.WorkspaceSymbolRequest=xu={}));var Iu;(function(e){e.method="workspaceSymbol/resolve",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Iu||(u.WorkspaceSymbolResolveRequest=Iu={}));var Fu;(function(e){e.method="textDocument/codeLens",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Fu||(u.CodeLensRequest=Fu={}));var Lu;(function(e){e.method="codeLens/resolve",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Lu||(u.CodeLensResolveRequest=Lu={}));var Au;(function(e){e.method="workspace/codeLens/refresh",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolRequestType0(e.method)})(Au||(u.CodeLensRefreshRequest=Au={}));var Wu;(function(e){e.method="textDocument/documentLink",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Wu||(u.DocumentLinkRequest=Wu={}));var Hu;(function(e){e.method="documentLink/resolve",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Hu||(u.DocumentLinkResolveRequest=Hu={}));var $u;(function(e){e.method="textDocument/formatting",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})($u||(u.DocumentFormattingRequest=$u={}));var Uu;(function(e){e.method="textDocument/rangeFormatting",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Uu||(u.DocumentRangeFormattingRequest=Uu={}));var zu;(function(e){e.method="textDocument/rangesFormatting",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(zu||(u.DocumentRangesFormattingRequest=zu={}));var Vu;(function(e){e.method="textDocument/onTypeFormatting",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Vu||(u.DocumentOnTypeFormattingRequest=Vu={}));var Bu;(function(e){e.Identifier=1})(Bu||(u.PrepareSupportDefaultBehavior=Bu={}));var Ju;(function(e){e.method="textDocument/rename",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Ju||(u.RenameRequest=Ju={}));var Gu;(function(e){e.method="textDocument/prepareRename",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Gu||(u.PrepareRenameRequest=Gu={}));var Xu;(function(e){e.method="workspace/executeCommand",e.messageDirection=R.MessageDirection.clientToServer,e.type=new R.ProtocolRequestType(e.method)})(Xu||(u.ExecuteCommandRequest=Xu={}));var Ku;(function(e){e.method="workspace/applyEdit",e.messageDirection=R.MessageDirection.serverToClient,e.type=new R.ProtocolRequestType("workspace/applyEdit")})(Ku||(u.ApplyWorkspaceEditRequest=Ku={}))});var rl=S(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.createProtocolConnection=void 0;var nl=Tt();function Df(e,t,n,r){return nl.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,nl.createMessageConnection)(e,t,n,r)}Or.createProtocolConnection=Df});var ol=S(qe=>{"use strict";var Rf=qe&&qe.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),Mr=qe&&qe.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Rf(t,e,n)};Object.defineProperty(qe,"__esModule",{value:!0});qe.LSPErrorCodes=qe.createProtocolConnection=void 0;Mr(Tt(),qe);Mr(gr(),qe);Mr(se(),qe);Mr(tl(),qe);var wf=rl();Object.defineProperty(qe,"createProtocolConnection",{enumerable:!0,get:function(){return wf.createProtocolConnection}});var il;(function(e){e.lspReservedErrorRangeStart=-32899,e.RequestFailed=-32803,e.ServerCancelled=-32802,e.ContentModified=-32801,e.RequestCancelled=-32800,e.lspReservedErrorRangeEnd=-32800})(il||(qe.LSPErrorCodes=il={}))});var de=S(Xe=>{"use strict";var Pf=Xe&&Xe.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),sl=Xe&&Xe.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Pf(t,e,n)};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.createProtocolConnection=void 0;var Cf=So();sl(So(),Xe);sl(ol(),Xe);function Tf(e,t,n,r){return(0,Cf.createMessageConnection)(e,t,n,r)}Xe.createProtocolConnection=Tf});var Vo=S(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.generateUuid=Ie.parse=Ie.isUUID=Ie.v4=Ie.empty=void 0;var Rn=class{constructor(t){this._value=t}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}},wn=class e extends Rn{static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return e._oneOf(e._chars)}constructor(){super([e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),"-","4",e._randomHex(),e._randomHex(),e._randomHex(),"-",e._oneOf(e._timeHighBits),e._randomHex(),e._randomHex(),e._randomHex(),"-",e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex(),e._randomHex()].join(""))}};wn._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];wn._timeHighBits=["8","9","a","b"];Ie.empty=new Rn("00000000-0000-0000-0000-000000000000");function al(){return new wn}Ie.v4=al;var kf=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function cl(e){return kf.test(e)}Ie.isUUID=cl;function Sf(e){if(!cl(e))throw new Error("invalid uuid");return new Rn(e)}Ie.parse=Sf;function qf(){return al().asHex()}Ie.generateUuid=qf});var ul=S(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.attachPartialResult=mt.ProgressFeature=mt.attachWorkDone=void 0;var gt=de(),Of=Vo(),St=class e{constructor(t,n){this._connection=t,this._token=n,e.Instances.set(this._token,this)}begin(t,n,r,i){let c={kind:"begin",title:t,percentage:n,message:r,cancellable:i};this._connection.sendProgress(gt.WorkDoneProgress.type,this._token,c)}report(t,n){let r={kind:"report"};typeof t=="number"?(r.percentage=t,n!==void 0&&(r.message=n)):r.message=t,this._connection.sendProgress(gt.WorkDoneProgress.type,this._token,r)}done(){e.Instances.delete(this._token),this._connection.sendProgress(gt.WorkDoneProgress.type,this._token,{kind:"end"})}};St.Instances=new Map;var Er=class extends St{constructor(t,n){super(t,n),this._source=new gt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},Pn=class{constructor(){}begin(){}report(){}done(){}},Nr=class extends Pn{constructor(){super(),this._source=new gt.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Mf(e,t){if(t===void 0||t.workDoneToken===void 0)return new Pn;let n=t.workDoneToken;return delete t.workDoneToken,new St(e,n)}mt.attachWorkDone=Mf;var Ef=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(t){super.initialize(t),t?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(gt.WorkDoneProgressCancelNotification.type,n=>{let r=St.Instances.get(n.token);(r instanceof Er||r instanceof Nr)&&r.cancel()}))}attachWorkDoneProgress(t){return t===void 0?new Pn:new St(this.connection,t)}createWorkDoneProgress(){if(this._progressSupported){let t=(0,Of.generateUuid)();return this.connection.sendRequest(gt.WorkDoneProgressCreateRequest.type,{token:t}).then(()=>new Er(this.connection,t))}else return Promise.resolve(new Nr)}};mt.ProgressFeature=Ef;var Bo;(function(e){e.type=new gt.ProgressType})(Bo||(Bo={}));var Jo=class{constructor(t,n){this._connection=t,this._token=n}report(t){this._connection.sendProgress(Bo.type,this._token,t)}};function Nf(e,t){if(t===void 0||t.partialResultToken===void 0)return;let n=t.partialResultToken;return delete t.partialResultToken,new Jo(e,n)}mt.attachPartialResult=Nf});var ll=S(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.ConfigurationFeature=void 0;var jf=de(),xf=Vn(),If=e=>class extends e{getConfiguration(t){return t?xf.string(t)?this._getConfiguration({section:t}):this._getConfiguration(t):this._getConfiguration({})}_getConfiguration(t){let n={items:Array.isArray(t)?t:[t]};return this.connection.sendRequest(jf.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(t)?r:r[0]:Array.isArray(t)?[]:null)}};jr.ConfigurationFeature=If});var dl=S(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.WorkspaceFoldersFeature=void 0;var xr=de(),Ff=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(t){super.initialize(t);let n=t.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new xr.Emitter,this.connection.onNotification(xr.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(t){super.fillServerCapabilities(t);let n=t.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(xr.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(xr.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};Ir.WorkspaceFoldersFeature=Ff});var fl=S(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.CallHierarchyFeature=void 0;var Go=de(),Lf=e=>class extends e{get callHierarchy(){return{onPrepare:t=>this.connection.onRequest(Go.CallHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:t=>{let n=Go.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:t=>{let n=Go.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Fr.CallHierarchyFeature=Lf});var Ko=S(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.SemanticTokensBuilder=pt.SemanticTokensDiff=pt.SemanticTokensFeature=void 0;var Lr=de(),Af=e=>class extends e{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(Lr.SemanticTokensRefreshRequest.type),on:t=>{let n=Lr.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:t=>{let n=Lr.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:t=>{let n=Lr.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};pt.SemanticTokensFeature=Af;var Ar=class{constructor(t,n){this.originalSequence=t,this.modifiedSequence=n}computeDiff(){let t=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<t&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<t){let i=t-1,c=n-1;for(;i>=r&&c>=r&&this.originalSequence[i]===this.modifiedSequence[c];)i--,c--;(i<r||c<r)&&(i++,c++);let h=i-r+1,v=this.modifiedSequence.slice(r,c+1);return v.length===1&&v[0]===this.originalSequence[i]?[{start:r,deleteCount:h-1}]:[{start:r,deleteCount:h,data:v}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<t?[{start:r,deleteCount:t-r}]:[]}};pt.SemanticTokensDiff=Ar;var Xo=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(t,n,r,i,c){let h=t,v=n;this._dataLen>0&&(h-=this._prevLine,h===0&&(v-=this._prevChar)),this._data[this._dataLen++]=h,this._data[this._dataLen++]=v,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=c,this._prevLine=t,this._prevChar=n}get id(){return this._id.toString()}previousResult(t){this.id===t&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Ar(this._prevData,this._data).computeDiff()}:this.build()}};pt.SemanticTokensBuilder=Xo});var hl=S(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.ShowDocumentFeature=void 0;var Wf=de(),Hf=e=>class extends e{showDocument(t){return this.connection.sendRequest(Wf.ShowDocumentRequest.type,t)}};Wr.ShowDocumentFeature=Hf});var gl=S(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.FileOperationsFeature=void 0;var rn=de(),$f=e=>class extends e{onDidCreateFiles(t){return this.connection.onNotification(rn.DidCreateFilesNotification.type,n=>{t(n)})}onDidRenameFiles(t){return this.connection.onNotification(rn.DidRenameFilesNotification.type,n=>{t(n)})}onDidDeleteFiles(t){return this.connection.onNotification(rn.DidDeleteFilesNotification.type,n=>{t(n)})}onWillCreateFiles(t){return this.connection.onRequest(rn.WillCreateFilesRequest.type,(n,r)=>t(n,r))}onWillRenameFiles(t){return this.connection.onRequest(rn.WillRenameFilesRequest.type,(n,r)=>t(n,r))}onWillDeleteFiles(t){return this.connection.onRequest(rn.WillDeleteFilesRequest.type,(n,r)=>t(n,r))}};Hr.FileOperationsFeature=$f});var ml=S($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.LinkedEditingRangeFeature=void 0;var Uf=de(),zf=e=>class extends e{onLinkedEditingRange(t){return this.connection.onRequest(Uf.LinkedEditingRangeRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0))}};$r.LinkedEditingRangeFeature=zf});var pl=S(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.TypeHierarchyFeature=void 0;var Qo=de(),Vf=e=>class extends e{get typeHierarchy(){return{onPrepare:t=>this.connection.onRequest(Qo.TypeHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:t=>{let n=Qo.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:t=>{let n=Qo.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Ur.TypeHierarchyFeature=Vf});var vl=S(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.InlineValueFeature=void 0;var yl=de(),Bf=e=>class extends e{get inlineValue(){return{refresh:()=>this.connection.sendRequest(yl.InlineValueRefreshRequest.type),on:t=>this.connection.onRequest(yl.InlineValueRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};zr.InlineValueFeature=Bf});var _l=S(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.FoldingRangeFeature=void 0;var bl=de(),Jf=e=>class extends e{get foldingRange(){return{refresh:()=>this.connection.sendRequest(bl.FoldingRangeRefreshRequest.type),on:t=>{let n=bl.FoldingRangeRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Vr.FoldingRangeFeature=Jf});var Dl=S(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.InlayHintFeature=void 0;var Yo=de(),Gf=e=>class extends e{get inlayHint(){return{refresh:()=>this.connection.sendRequest(Yo.InlayHintRefreshRequest.type),on:t=>this.connection.onRequest(Yo.InlayHintRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n))),resolve:t=>this.connection.onRequest(Yo.InlayHintResolveRequest.type,(n,r)=>t(n,r))}}};Br.InlayHintFeature=Gf});var Rl=S(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.DiagnosticFeature=void 0;var Cn=de(),Xf=e=>class extends e{get diagnostics(){return{refresh:()=>this.connection.sendRequest(Cn.DiagnosticRefreshRequest.type),on:t=>this.connection.onRequest(Cn.DocumentDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(Cn.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:t=>this.connection.onRequest(Cn.WorkspaceDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(Cn.WorkspaceDiagnosticRequest.partialResult,n)))}}};Jr.DiagnosticFeature=Xf});var es=S(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Gr.TextDocuments=void 0;var qt=de(),Zo=class{constructor(t){this._configuration=t,this._syncedDocuments=new Map,this._onDidChangeContent=new qt.Emitter,this._onDidOpen=new qt.Emitter,this._onDidClose=new qt.Emitter,this._onDidSave=new qt.Emitter,this._onWillSave=new qt.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(t){this._willSaveWaitUntil=t}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(t){return this._syncedDocuments.get(t)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(t){t.__textDocumentSync=qt.TextDocumentSyncKind.Incremental;let n=[];return n.push(t.onDidOpenTextDocument(r=>{let i=r.textDocument,c=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,c);let h=Object.freeze({document:c});this._onDidOpen.fire(h),this._onDidChangeContent.fire(h)})),n.push(t.onDidChangeTextDocument(r=>{let i=r.textDocument,c=r.contentChanges;if(c.length===0)return;let{version:h}=i;if(h==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let v=this._syncedDocuments.get(i.uri);v!==void 0&&(v=this._configuration.update(v,c,h),this._syncedDocuments.set(i.uri,v),this._onDidChangeContent.fire(Object.freeze({document:v})))})),n.push(t.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(t.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(t.onWillSaveTextDocumentWaitUntil((r,i)=>{let c=this._syncedDocuments.get(r.textDocument.uri);return c!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:c,reason:r.reason}),i):[]})),n.push(t.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),qt.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};Gr.TextDocuments=Zo});var ns=S(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.NotebookDocuments=on.NotebookSyncFeature=void 0;var Fe=de(),wl=es(),Kf=e=>class extends e{get synchronization(){return{onDidOpenNotebookDocument:t=>this.connection.onNotification(Fe.DidOpenNotebookDocumentNotification.type,n=>{t(n)}),onDidChangeNotebookDocument:t=>this.connection.onNotification(Fe.DidChangeNotebookDocumentNotification.type,n=>{t(n)}),onDidSaveNotebookDocument:t=>this.connection.onNotification(Fe.DidSaveNotebookDocumentNotification.type,n=>{t(n)}),onDidCloseNotebookDocument:t=>this.connection.onNotification(Fe.DidCloseNotebookDocumentNotification.type,n=>{t(n)})}}};on.NotebookSyncFeature=Kf;var Xr=class e{onDidOpenTextDocument(t){return this.openHandler=t,Fe.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(t){this.openHandler&&this.openHandler(t)}onDidChangeTextDocument(t){return this.changeHandler=t,Fe.Disposable.create(()=>{this.changeHandler=t})}changeTextDocument(t){this.changeHandler&&this.changeHandler(t)}onDidCloseTextDocument(t){return this.closeHandler=t,Fe.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(t){this.closeHandler&&this.closeHandler(t)}onWillSaveTextDocument(){return e.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return e.NULL_DISPOSE}onDidSaveTextDocument(){return e.NULL_DISPOSE}};Xr.NULL_DISPOSE=Object.freeze({dispose:()=>{}});var ts=class{constructor(t){t instanceof wl.TextDocuments?this._cellTextDocuments=t:this._cellTextDocuments=new wl.TextDocuments(t),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Fe.Emitter,this._onDidChange=new Fe.Emitter,this._onDidSave=new Fe.Emitter,this._onDidClose=new Fe.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(t){return this._cellTextDocuments.get(t.document)}getNotebookDocument(t){return this.notebookDocuments.get(t)}getNotebookCell(t){let n=this.notebookCellMap.get(t);return n&&n[0]}findNotebookDocumentForCell(t){let n=typeof t=="string"?t:t.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(t){let n=new Xr,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(t.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let c of i.cellTextDocuments)n.openTextDocument({textDocument:c});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(t.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let c=this.notebookDocuments.get(i.notebookDocument.uri);if(c===void 0)return;c.version=i.notebookDocument.version;let h=c.metadata,v=!1,k=i.change;k.metadata!==void 0&&(v=!0,c.metadata=k.metadata);let w=[],q=[],N=[],E=[];if(k.cells!==void 0){let U=k.cells;if(U.structure!==void 0){let y=U.structure.array;if(c.cells.splice(y.start,y.deleteCount,...y.cells!==void 0?y.cells:[]),U.structure.didOpen!==void 0)for(let p of U.structure.didOpen)n.openTextDocument({textDocument:p}),w.push(p.uri);if(U.structure.didClose)for(let p of U.structure.didClose)n.closeTextDocument({textDocument:p}),q.push(p.uri)}if(U.data!==void 0){let y=new Map(U.data.map(p=>[p.document,p]));for(let p=0;p<=c.cells.length;p++){let P=y.get(c.cells[p].document);if(P!==void 0){let A=c.cells.splice(p,1,P);if(N.push({old:A[0],new:P}),y.delete(P.document),y.size===0)break}}}if(U.textContent!==void 0)for(let y of U.textContent)n.changeTextDocument({textDocument:y.document,contentChanges:y.changes}),E.push(y.document.uri)}this.updateCellMap(c);let Z={notebookDocument:c};v&&(Z.metadata={old:h,new:c.metadata});let ge=[];for(let U of w)ge.push(this.getNotebookCell(U));let z=[];for(let U of q)z.push(this.getNotebookCell(U));let Q=[];for(let U of E)Q.push(this.getNotebookCell(U));(ge.length>0||z.length>0||N.length>0||Q.length>0)&&(Z.cells={added:ge,removed:z,changed:{data:N,textContent:Q}}),(Z.metadata!==void 0||Z.cells!==void 0)&&this._onDidChange.fire(Z)})),r.push(t.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let c=this.notebookDocuments.get(i.notebookDocument.uri);c!==void 0&&this._onDidSave.fire(c)})),r.push(t.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let c=this.notebookDocuments.get(i.notebookDocument.uri);if(c!==void 0){this._onDidClose.fire(c);for(let h of i.cellTextDocuments)n.closeTextDocument({textDocument:h});this.notebookDocuments.delete(i.notebookDocument.uri);for(let h of c.cells)this.notebookCellMap.delete(h.document)}})),Fe.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(t){for(let n of t.cells)this.notebookCellMap.set(n.document,[n,t])}};on.NotebookDocuments=ts});var Pl=S(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.MonikerFeature=void 0;var Qf=de(),Yf=e=>class extends e{get moniker(){return{on:t=>{let n=Qf.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>t(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Kr.MonikerFeature=Yf});var cs=S(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.createConnection=B.combineFeatures=B.combineNotebooksFeatures=B.combineLanguagesFeatures=B.combineWorkspaceFeatures=B.combineWindowFeatures=B.combineClientFeatures=B.combineTracerFeatures=B.combineTelemetryFeatures=B.combineConsoleFeatures=B._NotebooksImpl=B._LanguagesImpl=B.BulkUnregistration=B.BulkRegistration=B.ErrorMessageTracker=void 0;var T=de(),Le=Vn(),is=Vo(),x=ul(),Zf=ll(),eh=dl(),th=fl(),nh=Ko(),rh=hl(),ih=gl(),oh=ml(),sh=pl(),ah=vl(),ch=_l(),uh=Dl(),lh=Rl(),dh=ns(),fh=Pl();function rs(e){if(e!==null)return e}var os=class{constructor(){this._messages=Object.create(null)}add(t){let n=this._messages[t];n||(n=0),n++,this._messages[t]=n}sendErrors(t){Object.keys(this._messages).forEach(n=>{t.window.showErrorMessage(n)})}};B.ErrorMessageTracker=os;var Qr=class{constructor(){}rawAttach(t){this._rawConnection=t}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(t){}initialize(t){}error(t){this.send(T.MessageType.Error,t)}warn(t){this.send(T.MessageType.Warning,t)}info(t){this.send(T.MessageType.Info,t)}log(t){this.send(T.MessageType.Log,t)}debug(t){this.send(T.MessageType.Debug,t)}send(t,n){this._rawConnection&&this._rawConnection.sendNotification(T.LogMessageNotification.type,{type:t,message:n}).catch(()=>{(0,T.RAL)().console.error("Sending log message failed")})}},ss=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}showErrorMessage(t,...n){let r={type:T.MessageType.Error,message:t,actions:n};return this.connection.sendRequest(T.ShowMessageRequest.type,r).then(rs)}showWarningMessage(t,...n){let r={type:T.MessageType.Warning,message:t,actions:n};return this.connection.sendRequest(T.ShowMessageRequest.type,r).then(rs)}showInformationMessage(t,...n){let r={type:T.MessageType.Info,message:t,actions:n};return this.connection.sendRequest(T.ShowMessageRequest.type,r).then(rs)}},Cl=(0,rh.ShowDocumentFeature)((0,x.ProgressFeature)(ss)),Tl;(function(e){function t(){return new Yr}e.create=t})(Tl||(B.BulkRegistration=Tl={}));var Yr=class{constructor(){this._registrations=[],this._registered=new Set}add(t,n){let r=Le.string(t)?t:t.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=is.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},kl;(function(e){function t(){return new Tn(void 0,[])}e.create=t})(kl||(B.BulkUnregistration=kl={}));var Tn=class{constructor(t,n){this._connection=t,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(t){this._connection=t}add(t){this._unregistrations.set(t.method,t)}dispose(){let t=[];for(let r of this._unregistrations.values())t.push(r);let n={unregisterations:t};this._connection.sendRequest(T.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(t){let n=Le.string(t)?t:t.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest(T.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},c=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},Zr=class{attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}register(t,n,r){return t instanceof Yr?this.registerMany(t):t instanceof Tn?this.registerSingle1(t,n,r):this.registerSingle2(t,n)}registerSingle1(t,n,r){let i=Le.string(n)?n:n.method,c=is.generateUuid(),h={registrations:[{id:c,method:i,registerOptions:r||{}}]};return t.isAttached||t.attach(this.connection),this.connection.sendRequest(T.RegistrationRequest.type,h).then(v=>(t.add({id:c,method:i}),t),v=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(v)))}registerSingle2(t,n){let r=Le.string(t)?t:t.method,i=is.generateUuid(),c={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest(T.RegistrationRequest.type,c).then(h=>T.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),h=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(h)))}unregisterSingle(t,n){let r={unregisterations:[{id:t,method:n}]};return this.connection.sendRequest(T.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${t} failed.`)})}registerMany(t){let n=t.asRegistrationParams();return this.connection.sendRequest(T.RegistrationRequest.type,n).then(()=>new Tn(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},as=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}applyEdit(t){function n(i){return i&&!!i.edit}let r=n(t)?t:{edit:t};return this.connection.sendRequest(T.ApplyWorkspaceEditRequest.type,r)}},Sl=(0,ih.FileOperationsFeature)((0,eh.WorkspaceFoldersFeature)((0,Zf.ConfigurationFeature)(as))),ei=class{constructor(){this._trace=T.Trace.Off}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}set trace(t){this._trace=t}log(t,n){this._trace!==T.Trace.Off&&this.connection.sendNotification(T.LogTraceNotification.type,{message:t,verbose:this._trace===T.Trace.Verbose?n:void 0}).catch(()=>{})}},ti=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}logEvent(t){this.connection.sendNotification(T.TelemetryEventNotification.type,t).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},ni=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,x.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,x.attachPartialResult)(this.connection,n)}};B._LanguagesImpl=ni;var ql=(0,ch.FoldingRangeFeature)((0,fh.MonikerFeature)((0,lh.DiagnosticFeature)((0,uh.InlayHintFeature)((0,ah.InlineValueFeature)((0,sh.TypeHierarchyFeature)((0,oh.LinkedEditingRangeFeature)((0,nh.SemanticTokensFeature)((0,th.CallHierarchyFeature)(ni))))))))),ri=class{constructor(){}attach(t){this._connection=t}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(t){}fillServerCapabilities(t){}attachWorkDoneProgress(t){return(0,x.attachWorkDone)(this.connection,t)}attachPartialResultProgress(t,n){return(0,x.attachPartialResult)(this.connection,n)}};B._NotebooksImpl=ri;var Ol=(0,dh.NotebookSyncFeature)(ri);function Ml(e,t){return function(n){return t(e(n))}}B.combineConsoleFeatures=Ml;function El(e,t){return function(n){return t(e(n))}}B.combineTelemetryFeatures=El;function Nl(e,t){return function(n){return t(e(n))}}B.combineTracerFeatures=Nl;function jl(e,t){return function(n){return t(e(n))}}B.combineClientFeatures=jl;function xl(e,t){return function(n){return t(e(n))}}B.combineWindowFeatures=xl;function Il(e,t){return function(n){return t(e(n))}}B.combineWorkspaceFeatures=Il;function Fl(e,t){return function(n){return t(e(n))}}B.combineLanguagesFeatures=Fl;function Ll(e,t){return function(n){return t(e(n))}}B.combineNotebooksFeatures=Ll;function hh(e,t){function n(i,c,h){return i&&c?h(i,c):i||c}return{__brand:"features",console:n(e.console,t.console,Ml),tracer:n(e.tracer,t.tracer,Nl),telemetry:n(e.telemetry,t.telemetry,El),client:n(e.client,t.client,jl),window:n(e.window,t.window,xl),workspace:n(e.workspace,t.workspace,Il),languages:n(e.languages,t.languages,Fl),notebooks:n(e.notebooks,t.notebooks,Ll)}}B.combineFeatures=hh;function gh(e,t,n){let r=n&&n.console?new(n.console(Qr)):new Qr,i=e(r);r.rawAttach(i);let c=n&&n.tracer?new(n.tracer(ei)):new ei,h=n&&n.telemetry?new(n.telemetry(ti)):new ti,v=n&&n.client?new(n.client(Zr)):new Zr,k=n&&n.window?new(n.window(Cl)):new Cl,w=n&&n.workspace?new(n.workspace(Sl)):new Sl,q=n&&n.languages?new(n.languages(ql)):new ql,N=n&&n.notebooks?new(n.notebooks(Ol)):new Ol,E=[r,c,h,v,k,w,q,N];function Z(y){return y instanceof Promise?y:Le.thenable(y)?new Promise((p,P)=>{y.then(A=>p(A),A=>P(A))}):Promise.resolve(y)}let ge,z,Q,U={listen:()=>i.listen(),sendRequest:(y,...p)=>i.sendRequest(Le.string(y)?y:y.method,...p),onRequest:(y,p)=>i.onRequest(y,p),sendNotification:(y,p)=>{let P=Le.string(y)?y:y.method;return i.sendNotification(P,p)},onNotification:(y,p)=>i.onNotification(y,p),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:y=>(z=y,{dispose:()=>{z=void 0}}),onInitialized:y=>i.onNotification(T.InitializedNotification.type,y),onShutdown:y=>(ge=y,{dispose:()=>{ge=void 0}}),onExit:y=>(Q=y,{dispose:()=>{Q=void 0}}),get console(){return r},get telemetry(){return h},get tracer(){return c},get client(){return v},get window(){return k},get workspace(){return w},get languages(){return q},get notebooks(){return N},onDidChangeConfiguration:y=>i.onNotification(T.DidChangeConfigurationNotification.type,y),onDidChangeWatchedFiles:y=>i.onNotification(T.DidChangeWatchedFilesNotification.type,y),__textDocumentSync:void 0,onDidOpenTextDocument:y=>i.onNotification(T.DidOpenTextDocumentNotification.type,y),onDidChangeTextDocument:y=>i.onNotification(T.DidChangeTextDocumentNotification.type,y),onDidCloseTextDocument:y=>i.onNotification(T.DidCloseTextDocumentNotification.type,y),onWillSaveTextDocument:y=>i.onNotification(T.WillSaveTextDocumentNotification.type,y),onWillSaveTextDocumentWaitUntil:y=>i.onRequest(T.WillSaveTextDocumentWaitUntilRequest.type,y),onDidSaveTextDocument:y=>i.onNotification(T.DidSaveTextDocumentNotification.type,y),sendDiagnostics:y=>i.sendNotification(T.PublishDiagnosticsNotification.type,y),onHover:y=>i.onRequest(T.HoverRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),void 0)),onCompletion:y=>i.onRequest(T.CompletionRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),(0,x.attachPartialResult)(i,p))),onCompletionResolve:y=>i.onRequest(T.CompletionResolveRequest.type,y),onSignatureHelp:y=>i.onRequest(T.SignatureHelpRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),void 0)),onDeclaration:y=>i.onRequest(T.DeclarationRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),(0,x.attachPartialResult)(i,p))),onDefinition:y=>i.onRequest(T.DefinitionRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),(0,x.attachPartialResult)(i,p))),onTypeDefinition:y=>i.onRequest(T.TypeDefinitionRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),(0,x.attachPartialResult)(i,p))),onImplementation:y=>i.onRequest(T.ImplementationRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),(0,x.attachPartialResult)(i,p))),onReferences:y=>i.onRequest(T.ReferencesRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),(0,x.attachPartialResult)(i,p))),onDocumentHighlight:y=>i.onRequest(T.DocumentHighlightRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),(0,x.attachPartialResult)(i,p))),onDocumentSymbol:y=>i.onRequest(T.DocumentSymbolRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),(0,x.attachPartialResult)(i,p))),onWorkspaceSymbol:y=>i.onRequest(T.WorkspaceSymbolRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),(0,x.attachPartialResult)(i,p))),onWorkspaceSymbolResolve:y=>i.onRequest(T.WorkspaceSymbolResolveRequest.type,y),onCodeAction:y=>i.onRequest(T.CodeActionRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),(0,x.attachPartialResult)(i,p))),onCodeActionResolve:y=>i.onRequest(T.CodeActionResolveRequest.type,(p,P)=>y(p,P)),onCodeLens:y=>i.onRequest(T.CodeLensRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),(0,x.attachPartialResult)(i,p))),onCodeLensResolve:y=>i.onRequest(T.CodeLensResolveRequest.type,(p,P)=>y(p,P)),onDocumentFormatting:y=>i.onRequest(T.DocumentFormattingRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),void 0)),onDocumentRangeFormatting:y=>i.onRequest(T.DocumentRangeFormattingRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),void 0)),onDocumentOnTypeFormatting:y=>i.onRequest(T.DocumentOnTypeFormattingRequest.type,(p,P)=>y(p,P)),onRenameRequest:y=>i.onRequest(T.RenameRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),void 0)),onPrepareRename:y=>i.onRequest(T.PrepareRenameRequest.type,(p,P)=>y(p,P)),onDocumentLinks:y=>i.onRequest(T.DocumentLinkRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),(0,x.attachPartialResult)(i,p))),onDocumentLinkResolve:y=>i.onRequest(T.DocumentLinkResolveRequest.type,(p,P)=>y(p,P)),onDocumentColor:y=>i.onRequest(T.DocumentColorRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),(0,x.attachPartialResult)(i,p))),onColorPresentation:y=>i.onRequest(T.ColorPresentationRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),(0,x.attachPartialResult)(i,p))),onFoldingRanges:y=>i.onRequest(T.FoldingRangeRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),(0,x.attachPartialResult)(i,p))),onSelectionRanges:y=>i.onRequest(T.SelectionRangeRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),(0,x.attachPartialResult)(i,p))),onExecuteCommand:y=>i.onRequest(T.ExecuteCommandRequest.type,(p,P)=>y(p,P,(0,x.attachWorkDone)(i,p),void 0)),dispose:()=>i.dispose()};for(let y of E)y.attach(U);return i.onRequest(T.InitializeRequest.type,y=>{t.initialize(y),Le.string(y.trace)&&(c.trace=T.Trace.fromString(y.trace));for(let p of E)p.initialize(y.capabilities);if(z){let p=z(y,new T.CancellationTokenSource().token,(0,x.attachWorkDone)(i,y),void 0);return Z(p).then(P=>{if(P instanceof T.ResponseError)return P;let A=P;A||(A={capabilities:{}});let X=A.capabilities;X||(X={},A.capabilities=X),X.textDocumentSync===void 0||X.textDocumentSync===null?X.textDocumentSync=Le.number(U.__textDocumentSync)?U.__textDocumentSync:T.TextDocumentSyncKind.None:!Le.number(X.textDocumentSync)&&!Le.number(X.textDocumentSync.change)&&(X.textDocumentSync.change=Le.number(U.__textDocumentSync)?U.__textDocumentSync:T.TextDocumentSyncKind.None);for(let ee of E)ee.fillServerCapabilities(X);return A})}else{let p={capabilities:{textDocumentSync:T.TextDocumentSyncKind.None}};for(let P of E)P.fillServerCapabilities(p.capabilities);return p}}),i.onRequest(T.ShutdownRequest.type,()=>{if(t.shutdownReceived=!0,ge)return ge(new T.CancellationTokenSource().token)}),i.onNotification(T.ExitNotification.type,()=>{try{Q&&Q()}finally{t.shutdownReceived?t.exit(0):t.exit(1)}}),i.onNotification(T.SetTraceNotification.type,y=>{c.trace=T.Trace.fromString(y.value)}),U}B.createConnection=gh});var Al=S(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.resolveModulePath=Oe.FileSystem=Oe.resolveGlobalYarnPath=Oe.resolveGlobalNodePath=Oe.resolve=Oe.uriToFilePath=void 0;var mh=require("url"),Ve=require("path"),us=require("fs"),hs=require("child_process");function ph(e){let t=mh.parse(e);if(t.protocol!=="file:"||!t.path)return;let n=t.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let c=n[0],h=n[1];c.length===0&&h.length>1&&h[1]===":"&&n.shift()}return Ve.normalize(n.join("/"))}Oe.uriToFilePath=ph;function ls(){return process.platform==="win32"}function ii(e,t,n,r){let i="NODE_PATH",c=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((h,v)=>{let k=process.env,w=Object.create(null);Object.keys(k).forEach(q=>w[q]=k[q]),t&&us.existsSync(t)&&(w[i]?w[i]=t+Ve.delimiter+w[i]:w[i]=t,r&&r(`NODE_PATH value is: ${w[i]}`)),w.ELECTRON_RUN_AS_NODE="1";try{let q=(0,hs.fork)("",[],{cwd:n,env:w,execArgv:["-e",c]});if(q.pid===void 0){v(new Error(`Starting process to resolve node module  ${e} failed`));return}q.on("error",E=>{v(E)}),q.on("message",E=>{E.c==="r"&&(q.send({c:"e"}),E.s?h(E.r):v(new Error(`Failed to resolve module: ${e}`)))});let N={c:"rs",a:e};q.send(N)}catch(q){v(q)}})}Oe.resolve=ii;function ds(e){let t="npm",n=Object.create(null);Object.keys(process.env).forEach(c=>n[c]=process.env[c]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};ls()&&(t="npm.cmd",r.shell=!0);let i=()=>{};try{process.on("SIGPIPE",i);let c=(0,hs.spawnSync)(t,["config","get","prefix"],r).stdout;if(!c){e&&e("'npm config get prefix' didn't return a value.");return}let h=c.trim();return e&&e(`'npm config get prefix' value is: ${h}`),h.length>0?ls()?Ve.join(h,"node_modules"):Ve.join(h,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}Oe.resolveGlobalNodePath=ds;function yh(e){let t="yarn",n={encoding:"utf8"};ls()&&(t="yarn.cmd",n.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let i=(0,hs.spawnSync)(t,["global","dir","--json"],n),c=i.stdout;if(!c){e&&(e("'yarn global dir' didn't return a value."),i.stderr&&e(i.stderr));return}let h=c.trim().split(/\r?\n/);for(let v of h)try{let k=JSON.parse(v);if(k.type==="log")return Ve.join(k.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}Oe.resolveGlobalYarnPath=yh;var fs;(function(e){let t;function n(){return t!==void 0||(process.platform==="win32"?t=!1:t=!us.existsSync(__filename.toUpperCase())||!us.existsSync(__filename.toLowerCase())),t}e.isCaseSensitive=n;function r(i,c){return n()?Ve.normalize(c).indexOf(Ve.normalize(i))===0:Ve.normalize(c).toLowerCase().indexOf(Ve.normalize(i).toLowerCase())===0}e.isParent=r})(fs||(Oe.FileSystem=fs={}));function vh(e,t,n,r){return n?(Ve.isAbsolute(n)||(n=Ve.join(e,n)),ii(t,n,n,r).then(i=>fs.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${t} from node path location.`))).then(void 0,i=>ii(t,ds(r),e,r))):ii(t,ds(r),e,r)}Oe.resolveModulePath=vh});var gs=S((dm,Wl)=>{"use strict";Wl.exports=de()});var Hl=S(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.InlineCompletionFeature=void 0;var bh=de(),_h=e=>class extends e{get inlineCompletion(){return{on:t=>this.connection.onRequest(bh.InlineCompletionRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};oi.InlineCompletionFeature=_h});var zl=S(we=>{"use strict";var Dh=we&&we.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),Ul=we&&we.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Dh(t,e,n)};Object.defineProperty(we,"__esModule",{value:!0});we.ProposedFeatures=we.NotebookDocuments=we.TextDocuments=we.SemanticTokensBuilder=void 0;var Rh=Ko();Object.defineProperty(we,"SemanticTokensBuilder",{enumerable:!0,get:function(){return Rh.SemanticTokensBuilder}});var wh=Hl();Ul(de(),we);var Ph=es();Object.defineProperty(we,"TextDocuments",{enumerable:!0,get:function(){return Ph.TextDocuments}});var Ch=ns();Object.defineProperty(we,"NotebookDocuments",{enumerable:!0,get:function(){return Ch.NotebookDocuments}});Ul(cs(),we);var $l;(function(e){e.all={__brand:"features",languages:wh.InlineCompletionFeature}})($l||(we.ProposedFeatures=$l={}))});var Kl=S(Ae=>{"use strict";var Th=Ae&&Ae.__createBinding||(Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]})),Gl=Ae&&Ae.__exportStar||function(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Th(t,e,n)};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.createConnection=Ae.Files=void 0;var Vl=require("node:util"),ms=Vn(),kh=cs(),kn=Al(),Ot=gs();Gl(gs(),Ae);Gl(zl(),Ae);var Bl;(function(e){e.uriToFilePath=kn.uriToFilePath,e.resolveGlobalNodePath=kn.resolveGlobalNodePath,e.resolveGlobalYarnPath=kn.resolveGlobalYarnPath,e.resolve=kn.resolve,e.resolveModulePath=kn.resolveModulePath})(Bl||(Ae.Files=Bl={}));var Jl;function si(){if(Jl!==void 0)try{Jl.end()}catch{}}var sn=!1,Xl;function Sh(){let e="--clientProcessId";function t(n){try{let r=parseInt(n);isNaN(r)||(Xl=setInterval(()=>{try{process.kill(r,0)}catch{si(),process.exit(sn?0:1)}},3e3))}catch{}}for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===e&&n+1<process.argv.length){t(process.argv[n+1]);return}else{let i=r.split("=");i[0]===e&&t(i[1])}}}Sh();var qh={initialize:e=>{let t=e.processId;ms.number(t)&&Xl===void 0&&setInterval(()=>{try{process.kill(t,0)}catch{process.exit(sn?0:1)}},3e3)},get shutdownReceived(){return sn},set shutdownReceived(e){sn=e},exit:e=>{si(),process.exit(e)}};function Oh(e,t,n,r){let i,c,h,v;return e!==void 0&&e.__brand==="features"&&(i=e,e=t,t=n,n=r),Ot.ConnectionStrategy.is(e)||Ot.ConnectionOptions.is(e)?v=e:(c=e,h=t,v=n),Mh(c,h,v,i)}Ae.createConnection=Oh;function Mh(e,t,n,r){let i=!1;if(!e&&!t&&process.argv.length>2){let k,w,q=process.argv.slice(2);for(let N=0;N<q.length;N++){let E=q[N];if(E==="--node-ipc"){e=new Ot.IPCMessageReader(process),t=new Ot.IPCMessageWriter(process);break}else if(E==="--stdio"){i=!0,e=process.stdin,t=process.stdout;break}else if(E==="--socket"){k=parseInt(q[N+1]);break}else if(E==="--pipe"){w=q[N+1];break}else{var c=E.split("=");if(c[0]==="--socket"){k=parseInt(c[1]);break}else if(c[0]==="--pipe"){w=c[1];break}}}if(k){let N=(0,Ot.createServerSocketTransport)(k);e=N[0],t=N[1]}else if(w){let N=(0,Ot.createServerPipeTransport)(w);e=N[0],t=N[1]}}var h="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+h);if(!t)throw new Error("Connection output stream is not set. "+h);if(ms.func(e.read)&&ms.func(e.on)){let k=e;k.on("end",()=>{si(),process.exit(sn?0:1)}),k.on("close",()=>{si(),process.exit(sn?0:1)})}let v=k=>{let w=(0,Ot.createProtocolConnection)(e,t,k,n);return i&&Eh(k),w};return(0,kh.createConnection)(v,qh,r)}function Eh(e){function t(r){return r.map(i=>typeof i=="string"?i:(0,Vl.inspect)(i)).join(" ")}let n=new Map;console.assert=function(i,...c){if(!i)if(c.length===0)e.error("Assertion failed");else{let[h,...v]=c;e.error(`Assertion failed: ${h} ${t(v)}`)}},console.count=function(i="default"){let c=String(i),h=n.get(c)??0;h+=1,n.set(c,h),e.log(`${c}: ${c}`)},console.countReset=function(i){i===void 0?n.clear():n.delete(String(i))},console.debug=function(...i){e.log(t(i))},console.dir=function(i,c){e.log((0,Vl.inspect)(i,c))},console.log=function(...i){e.log(t(i))},console.error=function(...i){e.error(t(i))},console.trace=function(...i){let c=new Error().stack.replace(/(.+\n){2}/,""),h="Trace";i.length!==0&&(h+=`: ${t(i)}`),e.log(`${h}
${c}`)},console.warn=function(...i){e.warn(t(i))}}});var ps=S((pm,Ql)=>{"use strict";Ql.exports=Kl()});var ye=Rt(ps());var ai=class e{constructor(t,n,r,i){this._uri=t,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let n=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(n,r)}return this._content}update(t,n){for(let r of t)if(e.isIncremental(r)){let i=ed(r.range),c=this.offsetAt(i.start),h=this.offsetAt(i.end);this._content=this._content.substring(0,c)+r.text+this._content.substring(h,this._content.length);let v=Math.max(i.start.line,0),k=Math.max(i.end.line,0),w=this._lineOffsets,q=Yl(r.text,!1,c);if(k-v===q.length)for(let E=0,Z=q.length;E<Z;E++)w[E+v+1]=q[E];else q.length<1e4?w.splice(v+1,k-v,...q):this._lineOffsets=w=w.slice(0,v+1).concat(q,w.slice(k+1));let N=r.text.length-(h-c);if(N!==0)for(let E=v+1+q.length,Z=w.length;E<Z;E++)w[E]=w[E]+N}else if(e.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=Yl(this._content,!0)),this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:t};for(;r<i;){let h=Math.floor((r+i)/2);n[h]>t?i=h:r=h+1}let c=r-1;return t=this.ensureBeforeEOL(t,n[c]),{line:c,character:t-n[c]}}offsetAt(t){let n=this.getLineOffsets();if(t.line>=n.length)return this._content.length;if(t.line<0)return 0;let r=n[t.line];if(t.character<=0)return r;let i=t.line+1<n.length?n[t.line+1]:this._content.length,c=Math.min(r+t.character,i);return this.ensureBeforeEOL(c,r)}ensureBeforeEOL(t,n){for(;t>n&&Zl(this._content.charCodeAt(t-1));)t--;return t}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(t){let n=t;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}},ci;(function(e){function t(i,c,h,v){return new ai(i,c,h,v)}e.create=t;function n(i,c,h){if(i instanceof ai)return i.update(c,h),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}e.update=n;function r(i,c){let h=i.getText(),v=ys(c.map(Nh),(q,N)=>{let E=q.range.start.line-N.range.start.line;return E===0?q.range.start.character-N.range.start.character:E}),k=0,w=[];for(let q of v){let N=i.offsetAt(q.range.start);if(N<k)throw new Error("Overlapping edit");N>k&&w.push(h.substring(k,N)),q.newText.length&&w.push(q.newText),k=i.offsetAt(q.range.end)}return w.push(h.substr(k)),w.join("")}e.applyEdits=r})(ci||(ci={}));function ys(e,t){if(e.length<=1)return e;let n=e.length/2|0,r=e.slice(0,n),i=e.slice(n);ys(r,t),ys(i,t);let c=0,h=0,v=0;for(;c<r.length&&h<i.length;)t(r[c],i[h])<=0?e[v++]=r[c++]:e[v++]=i[h++];for(;c<r.length;)e[v++]=r[c++];for(;h<i.length;)e[v++]=i[h++];return e}function Yl(e,t,n=0){let r=t?[n]:[];for(let i=0;i<e.length;i++){let c=e.charCodeAt(i);Zl(c)&&(c===13&&i+1<e.length&&e.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}function Zl(e){return e===13||e===10}function ed(e){let t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function Nh(e){let t=ed(e.range);return t!==e.range?{newText:e.newText,range:t}:e}var ui=Rt(require("fs")),td=Rt(require("path")),nd=require("child_process");function bs(e){if(e&&e!=="volta"){if(vs(e))return e;console.warn(`Configured Volta compiler path not found or not executable: ${e}`)}try{let n=(0,nd.execSync)("which volta",{encoding:"utf-8"}).trim();if(n&&vs(n))return n}catch{}let t=["/usr/local/bin/volta","/usr/bin/volta",td.join(process.env.HOME||"",".local","bin","volta"),"/home/quantum/coding/Volta/bin/volta"];for(let n of t)if(vs(n))return n;return null}function vs(e){try{return ui.accessSync(e,ui.constants.X_OK),!0}catch{return!1}}function _s(){return`Volta compiler not found. Please:
1. Install Volta compiler and ensure it's in your PATH, or
2. Set "volta.compilerPath" in your VSCode settings to point to the Volta executable.

Example settings.json:
{
  "volta.compilerPath": "/path/to/volta"
}`}var rd=require("child_process"),li=Rt(ps()),di=Rt(require("fs")),id=Rt(require("path")),od=Rt(require("os"));async function sd(e,t,n){let r=await jh(t);try{let i=await xh(e,r);return{diagnostics:i,success:i.length===0}}finally{try{di.unlinkSync(r)}catch{}}}async function jh(e){let t=od.tmpdir(),n=id.join(t,`volta_lsp_${Date.now()}_${Math.random().toString(36).substring(7)}.vlt`);return new Promise((r,i)=>{di.writeFile(n,e,"utf8",c=>{c?i(c):r(n)})})}function xh(e,t){return new Promise(n=>{let r=[],i=(0,rd.spawn)(e,["--no-execute",t]),c="";i.stderr.on("data",h=>{c+=h.toString()}),i.on("close",h=>{let v=Ih(c);r.push(...v),n(r)}),i.on("error",h=>{let v={severity:li.DiagnosticSeverity.Error,range:{start:{line:0,character:0},end:{line:0,character:0}},message:`Failed to run Volta compiler: ${h.message}`,source:"volta"};r.push(v),n(r)})})}function Ih(e){let t=[],n=e.split(`
`),r=/:(\d+):(\d+)(?:-(\d+))?: (error|warning): (.+)/;for(let i of n){let c=i.match(r);if(c){let h=parseInt(c[1],10)-1,v=parseInt(c[2],10),k=c[3]?parseInt(c[3],10):v+1,w=c[4],q=c[5],E={severity:w==="error"?li.DiagnosticSeverity.Error:li.DiagnosticSeverity.Warning,range:{start:{line:h,character:v},end:{line:h,character:k}},message:q.trim(),source:"volta"};t.push(E)}}return t}var ad=require("child_process");async function fi(e,t,n,r){return new Promise(i=>{let c=["--lsp-info",t,n.toString(),r.toString()],h=(0,ad.spawn)(e,c),v="",k="";h.stdout.on("data",w=>{v+=w.toString()}),h.stderr.on("data",w=>{k+=w.toString()}),h.on("close",w=>{try{let q=JSON.parse(v);i(q)}catch(q){i({success:!1,error:{code:"PARSE_ERROR",message:`Failed to parse compiler output: ${q}`}})}}),h.on("error",w=>{i({success:!1,error:{code:"SPAWN_ERROR",message:`Failed to spawn compiler: ${w.message}`}})})})}var L=(0,ye.createConnection)(ye.ProposedFeatures.all),yt=new ye.TextDocuments(ci),mi=!1,Ds=!1,Fh=!1,Pe=null;L.onInitialize(e=>{let t=e.capabilities;mi=!!(t.workspace&&t.workspace.configuration),Ds=!!(t.workspace&&t.workspace.workspaceFolders),Fh=!!(t.textDocument&&t.textDocument.publishDiagnostics&&t.textDocument.publishDiagnostics.relatedInformation);let n={capabilities:{textDocumentSync:ye.TextDocumentSyncKind.Incremental,completionProvider:{resolveProvider:!0},hoverProvider:!0,definitionProvider:!0,signatureHelpProvider:{triggerCharacters:["(",","],retriggerCharacters:[","]}}};return Ds&&(n.capabilities.workspace={workspaceFolders:{supported:!0}}),n});L.onInitialized(()=>{mi&&L.client.register(ye.DidChangeConfigurationNotification.type,void 0),Ds&&L.workspace.onDidChangeWorkspaceFolders(e=>{L.console.log("Workspace folder change event received.")}),Pe=bs(hi.compilerPath),Pe?L.console.log(`Volta compiler found at: ${Pe}`):(L.window.showErrorMessage(_s()),L.console.log("Volta compiler not found!"))});var ud={maxNumberOfProblems:1e3,compilerPath:"volta"},hi=ud,gi=new Map;L.onDidChangeConfiguration(e=>{mi?gi.clear():hi=e.settings.volta||ud;let t=Pe;Pe=bs(hi.compilerPath),Pe?L.console.log(`Volta compiler found at: ${Pe}`):L.window.showErrorMessage(_s()),t!==Pe&&yt.all().forEach(Rs)});function Lh(e){if(!mi)return Promise.resolve(hi);let t=gi.get(e);return t||(t=L.workspace.getConfiguration({scopeUri:e,section:"volta"}),gi.set(e,t)),t}yt.onDidClose(e=>{gi.delete(e.document.uri);let t=Sn.get(e.document.uri);t&&(clearTimeout(t),Sn.delete(e.document.uri))});var cd=new Set,Sn=new Map;yt.onDidOpen(e=>{let t=e.document.uri;cd.has(t)||(cd.add(t),Rs(e.document))});yt.onDidChangeContent(e=>{let t=e.document.uri,n=Sn.get(t);n&&clearTimeout(n);let r=setTimeout(()=>{Rs(e.document),Sn.delete(t)},1e3);Sn.set(t,r)});async function Rs(e){let t=e.getText(),n=await Lh(e.uri);if(L.console.log(`Validating document: ${e.uri}`),!Pe){L.console.log("Compiler not available, skipping validation");return}try{let r=await sd(Pe,t,e.uri);L.sendDiagnostics({uri:e.uri,diagnostics:r.diagnostics}),r.success?L.console.log(`\u2713 Document validated successfully: ${e.uri}`):L.console.log(`\u2717 Document has ${r.diagnostics.length} error(s): ${e.uri}`)}catch(r){L.console.log(`Error validating document: ${r}`)}}L.onDidChangeWatchedFiles(e=>{L.console.log("We received a file change event")});L.onHover(async e=>{if(!Pe||!yt.get(e.textDocument.uri))return null;let n=e.textDocument.uri.replace("file://",""),r=e.position.line+1,i=e.position.character;L.console.log(`Hover request at ${n}:${r}:${i}`);try{let c=await fi(Pe,n,r,i);if(c.success&&c.result){let h=c.result,v=`**${h.name}**: \`${h.type}\`

`;if(v+=`\`\`\`volta
${h.signature}
\`\`\``,h.documentation&&(v+=`

${h.documentation}`),h.parameters&&h.parameters.length>0){let k=h.parameters.filter(w=>w.documentation);if(k.length>0){v+=`

**Parameters:**
`;for(let w of k)v+=`- \`${w.name}\`: ${w.documentation}
`}}return h.returnDoc&&(v+=`

**Returns:** ${h.returnDoc}`),{contents:{kind:"markdown",value:v}}}return null}catch(c){return L.console.log(`Hover error: ${c}`),null}});L.onDefinition(async e=>{if(!Pe||!yt.get(e.textDocument.uri))return null;let n=e.textDocument.uri.replace("file://",""),r=e.position.line+1,i=e.position.character;L.console.log(`Definition request at ${n}:${r}:${i}`);try{let c=await fi(Pe,n,r,i);return c.success&&c.result?{uri:e.textDocument.uri,range:{start:e.position,end:e.position}}:null}catch(c){return L.console.log(`Definition error: ${c}`),null}});L.onSignatureHelp(async e=>{if(!Pe)return null;let t=yt.get(e.textDocument.uri);if(!t)return null;let n=e.textDocument.uri.replace("file://",""),i=t.getText().split(`
`),c=e.position.line,h=e.position.character,k=i[c].substring(0,h);L.console.log(`Signature help request at line ${c}, column ${h}`),L.console.log(`Text before cursor: "${k}"`);let w=k.lastIndexOf("(");if(w===-1)return L.console.log("No opening paren found"),null;let N=k.substring(0,w).trim().match(/(\w+)$/);if(!N)return L.console.log("No function name found"),null;let E=N[1];L.console.log(`Found function call: ${E}`);let Z=-1,ge=-1;for(let z=0;z<i.length;z++){let Q=i[z].match(/fn\s+(\w+)\s*\(/);if(Q&&Q[1]===E){Z=z+1,ge=i[z].indexOf("fn")+3;break}}if(Z===-1)return L.console.log(`Function definition for ${E} not found`),null;L.console.log(`Found function definition at line ${Z}, column ${ge}`);try{let z=await fi(Pe,n,Z,ge);if(!z.success||!z.result||!z.result.parameters)return L.console.log("Failed to get symbol info or no parameters"),null;let Q=z.result,U=(Q.parameters||[]).map(be=>({label:be.name,documentation:be.documentation||void 0})),y=(Q.parameters||[]).map(be=>be.name).join(", "),p=`${Q.name}(${y})`;L.console.log(`Built signature: ${p}`);let P={label:p,documentation:Q.documentation||void 0,parameters:U},X=(k.substring(w+1).match(/,/g)||[]).length,ee=Math.min(X,U.length-1);return L.console.log(`Active parameter: ${ee} (comma count: ${X})`),{signatures:[P],activeSignature:0,activeParameter:ee>=0?ee:0}}catch(z){return L.console.log(`Signature help error: ${z}`),null}});L.onCompletion(e=>[{label:"fn",kind:ye.CompletionItemKind.Keyword,data:1},{label:"if",kind:ye.CompletionItemKind.Keyword,data:2},{label:"else",kind:ye.CompletionItemKind.Keyword,data:3},{label:"while",kind:ye.CompletionItemKind.Keyword,data:4},{label:"for",kind:ye.CompletionItemKind.Keyword,data:5},{label:"return",kind:ye.CompletionItemKind.Keyword,data:6},{label:"match",kind:ye.CompletionItemKind.Keyword,data:7}]);L.onCompletionResolve(e=>(e.data===1?(e.detail="Function declaration",e.documentation="Creates a new function"):e.data===2&&(e.detail="If statement",e.documentation="Conditional execution"),e));yt.listen(L);L.listen();L.console.log("Volta Language Server is running!");
